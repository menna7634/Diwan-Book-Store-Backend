import{a as L,c as D,f as j,i as z,s as A}from"./chunk-YB375EBC.js";import{a as H}from"./chunk-B2KEH2H4.js";import{J as M,L as n,Oa as W,P,Pa as B,T as c,Va as F,aa as s,ba as i,ca as t,cb as N,da as g,fb as O,ha as I,ia as V,ja as w,ka as S,la as m,oa as x,qa as a,ra as _,sa as y,ua as T,v as k,va as f,w as u,wa as v,x as h,xa as b,y as C,z as E}from"./chunk-VTSCHVBM.js";function R(o,d){o&1&&(C(),i(0,"svg",18),g(1,"polyline",19),t())}function U(o,d){if(o&1&&(i(0,"span"),a(1),t()),o&2){let e=m().index;n(),_(e+1)}}function q(o,d){o&1&&g(0,"div",20)}function J(o,d){if(o&1&&(I(0),i(1,"div",12)(2,"div",13),c(3,R,2,0,"svg",14)(4,U,2,1,"span",15),t(),i(5,"span",16),a(6),t()(),c(7,q,1,0,"div",17),V()),o&2){let e=d.$implicit,l=d.index,r=m();n(2),x("bg-primary",r.currentStep>=l+1)("text-white",r.currentStep>=l+1)("bg-gray-100",r.currentStep<l+1)("text-gray-400",r.currentStep<l+1),n(),s("ngIf",r.currentStep>l+1),n(),s("ngIf",r.currentStep<=l+1),n(),x("text-gray-900",r.currentStep>=l+1)("text-gray-400",r.currentStep<l+1),n(),_(e),n(),s("ngIf",l<r.steps.length-1)}}function Q(o,d){if(o&1&&(i(0,"div",21)(1,"div",22),C(),i(2,"svg",23),g(3,"polyline",19),t()(),E(),i(4,"h2",7),a(5,"Order Placed!"),t(),i(6,"p",24),a(7,"Your order has been confirmed."),t(),i(8,"p",25),a(9),t(),i(10,"div",26)(11,"a",27),a(12," View My Orders "),t(),i(13,"a",28),a(14," Continue Shopping "),t()()()),o&2){let e=m();n(9),y(" ",e.placedOrderId," ")}}function K(o,d){o&1&&(i(0,"p",64),a(1," Phone must be 11 digits starting with 010, 011, or 012 "),t())}function X(o,d){o&1&&(i(0,"p",64),a(1," Zip code must be numbers only "),t())}function $(o,d){o&1&&(i(0,"p",65),a(1," Please fill in all required fields. "),t())}function ee(o,d){if(o&1){let e=w();i(0,"div",45)(1,"h2",46),a(2,"Shipping Address"),t(),i(3,"div",47)(4,"div",48)(5,"label",49),a(6,"Full Name *"),t(),i(7,"input",50),b("ngModelChange",function(r){u(e);let p=m(2);return v(p.shipping.fullName,r)||(p.shipping.fullName=r),h(r)}),t()(),i(8,"div",48)(9,"label",49),a(10,"Phone *"),t(),i(11,"input",51),b("ngModelChange",function(r){u(e);let p=m(2);return v(p.shipping.phone,r)||(p.shipping.phone=r),h(r)}),t(),c(12,K,2,0,"p",52),t(),i(13,"div",53)(14,"label",49),a(15,"Street Address *"),t(),i(16,"input",54),b("ngModelChange",function(r){u(e);let p=m(2);return v(p.shipping.street,r)||(p.shipping.street=r),h(r)}),t()(),i(17,"div",48)(18,"label",49),a(19,"City *"),t(),i(20,"input",55),b("ngModelChange",function(r){u(e);let p=m(2);return v(p.shipping.city,r)||(p.shipping.city=r),h(r)}),t()(),i(21,"div",48)(22,"label",49),a(23,"State *"),t(),i(24,"input",56),b("ngModelChange",function(r){u(e);let p=m(2);return v(p.shipping.state,r)||(p.shipping.state=r),h(r)}),t()(),i(25,"div",48)(26,"label",49),a(27,"Country *"),t(),i(28,"input",57),b("ngModelChange",function(r){u(e);let p=m(2);return v(p.shipping.country,r)||(p.shipping.country=r),h(r)}),t()(),i(29,"div",48)(30,"label",49),a(31,"ZIP Code *"),t(),i(32,"input",58),b("ngModelChange",function(r){u(e);let p=m(2);return v(p.shipping.zipCode,r)||(p.shipping.zipCode=r),h(r)}),t(),c(33,X,2,0,"p",52),t()(),c(34,$,2,0,"p",59),i(35,"button",60),S("click",function(){u(e);let r=m(2);return h(r.goToPayment())}),a(36," Continue to Payment "),C(),i(37,"svg",61),g(38,"path",62)(39,"path",63),t()()()}if(o&2){let e=m(2);n(7),x("border-red-400",e.submitted&&!e.shipping.fullName)("border-gray-200",!(e.submitted&&!e.shipping.fullName)),f("ngModel",e.shipping.fullName),n(4),x("border-red-400",e.submitted&&!e.shipping.phone)("border-gray-200",!(e.submitted&&!e.shipping.phone)),f("ngModel",e.shipping.phone),n(),s("ngIf",e.submitted&&!e.isPhoneValid()),n(4),x("border-red-400",e.submitted&&!e.shipping.street)("border-gray-200",!(e.submitted&&!e.shipping.street)),f("ngModel",e.shipping.street),n(4),x("border-red-400",e.submitted&&!e.shipping.city)("border-gray-200",!(e.submitted&&!e.shipping.city)),f("ngModel",e.shipping.city),n(4),x("border-red-400",e.submitted&&!e.shipping.state)("border-gray-200",!(e.submitted&&!e.shipping.state)),f("ngModel",e.shipping.state),n(4),x("border-red-400",e.submitted&&!e.shipping.country)("border-gray-200",!(e.submitted&&!e.shipping.country)),f("ngModel",e.shipping.country),n(4),x("border-red-400",e.submitted&&!e.shipping.zipCode)("border-gray-200",!(e.submitted&&!e.shipping.zipCode)),f("ngModel",e.shipping.zipCode),n(),s("ngIf",e.submitted&&!e.isZipValid()),n(),s("ngIf",e.submitted&&!e.isAddressValid())}}function te(o,d){o&1&&g(0,"div",82)}function ie(o,d){if(o&1){let e=w();i(0,"label",74)(1,"input",75),b("ngModelChange",function(r){u(e);let p=m(3);return v(p.selectedPayment,r)||(p.selectedPayment=r),h(r)}),t(),i(2,"div",76),a(3),t(),i(4,"div",77)(5,"p",78),a(6),t(),i(7,"p",79),a(8),t()(),i(9,"div",80),c(10,te,1,0,"div",81),t()()}if(o&2){let e=d.$implicit,l=m(3);x("border-primary",l.selectedPayment===e.id)("bg-primary/5",l.selectedPayment===e.id)("border-gray-200",l.selectedPayment!==e.id),n(),s("value",e.id),f("ngModel",l.selectedPayment),n(),x("bg-primary/15",l.selectedPayment===e.id)("bg-gray-100",l.selectedPayment!==e.id),n(),y(" ",e.icon," "),n(3),_(e.label),n(2),_(e.desc),n(),x("border-primary",l.selectedPayment===e.id)("border-gray-300",l.selectedPayment!==e.id),n(),s("ngIf",l.selectedPayment===e.id)}}function ne(o,d){o&1&&(i(0,"div",83)(1,"div",48)(2,"label",49),a(3,"Card Number"),t(),g(4,"input",84),t(),i(5,"div",85)(6,"div",48)(7,"label",49),a(8,"Expiry"),t(),g(9,"input",86),t(),i(10,"div",48)(11,"label",49),a(12,"CVV"),t(),g(13,"input",87),t()()())}function re(o,d){o&1&&(C(),i(0,"svg",88),g(1,"path",89),t())}function oe(o,d){if(o&1){let e=w();i(0,"div",45)(1,"h2",46),a(2,"Payment Method"),t(),i(3,"div",66),c(4,ie,11,20,"label",67),t(),c(5,ne,14,0,"div",68),i(6,"div",69)(7,"button",70),S("click",function(){u(e);let r=m(2);return h(r.currentStep=1)}),a(8," Back "),t(),i(9,"button",71),S("click",function(){u(e);let r=m(2);return h(r.placeOrder())}),c(10,re,2,0,"svg",72),a(11),t()(),i(12,"p",73),a(13,"\u{1F512} Your information is secure"),t()()}if(o&2){let e=m(2);n(4),s("ngForOf",e.paymentMethods),n(),s("ngIf",e.selectedPayment==="card"),n(4),s("disabled",e.placing),n(),s("ngIf",e.placing),n(),y(" ",e.placing?"Placing Order\u2026":"Place Order"," ")}}function ae(o,d){if(o&1&&g(0,"img",96),o&2){let e=m().$implicit;s("src",e.imageUrl,M)("alt",e.title)}}function le(o,d){if(o&1&&(i(0,"div",90)(1,"div",91),c(2,ae,1,2,"img",92),t(),i(3,"div",93)(4,"p",94),a(5),t(),i(6,"p",79),a(7),t()(),i(8,"span",95),a(9),t()()),o&2){let e=d.$implicit;n(2),s("ngIf",e.imageUrl),n(3),_(e.title),n(2),y("Qty: ",e.quantity),n(2),y("$",(e.price*e.quantity).toFixed(2))}}function de(o,d){if(o&1&&(i(0,"div",97)(1,"p",98),a(2,"Shipping to:"),t(),i(3,"p"),a(4),t(),i(5,"p"),a(6),t(),i(7,"p"),a(8),t(),i(9,"p"),a(10),t()()),o&2){let e=m(2);n(4),_(e.shipping.fullName),n(2),_(e.shipping.street),n(2),T("",e.shipping.city,", ",e.shipping.state," ",e.shipping.zipCode),n(2),_(e.shipping.country)}}function pe(o,d){if(o&1&&(i(0,"div",2)(1,"div",29)(2,"div",30),c(3,ee,40,38,"div",31)(4,oe,14,5,"div",31),t(),i(5,"div",32)(6,"div",33)(7,"h2",34),a(8,"Order Summary"),t(),i(9,"div",35),c(10,le,10,4,"div",36),t(),g(11,"hr",37),i(12,"div",38)(13,"div",39)(14,"span"),a(15,"Subtotal"),t(),i(16,"span",40),a(17),t()(),i(18,"div",39)(19,"span"),a(20,"Shipping"),t(),i(21,"span",41),a(22),t()(),g(23,"hr",42),i(24,"div",43)(25,"span"),a(26,"Total"),t(),i(27,"span"),a(28),t()()(),c(29,de,11,6,"div",44),t()()()()),o&2){let e=m();n(3),s("ngIf",e.currentStep===1),n(),s("ngIf",e.currentStep===2),n(6),s("ngForOf",e.cart().items),n(7),y("$",e.cart().subtotal.toFixed(2)),n(4),x("text-green-600",e.cart().shipping===0),n(),y(" ",e.cart().shipping===0?"FREE":"$"+e.cart().shipping.toFixed(2)," "),n(6),y("$",e.cart().total.toFixed(2)),n(),s("ngIf",e.currentStep===2&&e.isAddressValid())}}var Y=class o{cartService=k(H);cart=this.cartService.cart;currentStep=1;steps=["Shipping","Payment"];submitted=!1;placing=!1;orderPlaced=!1;placedOrderId="";selectedPayment="cash_on_delivery";paymentMethods=[{id:"cash_on_delivery",label:"Cash on Delivery",desc:"Pay when you receive",icon:"\u{1F4B5}"},{id:"card",label:"Credit / Debit Card",desc:"Visa, Mastercard, Amex",icon:"\u{1F4B3}"}];shipping={fullName:"",street:"",city:"",state:"",country:"",zipCode:"",phone:""};isPhoneValid(){return/^(010|011|012)\d{8}$/.test(this.shipping.phone)}isZipValid(){return/^\d+$/.test(this.shipping.zipCode)}isAddressValid(){let{fullName:d,street:e,city:l,state:r,country:p,zipCode:G,phone:Z}=this.shipping;return!!(d&&e&&l&&r&&p&&G&&Z)&&this.isPhoneValid()&&this.isZipValid()}goToPayment(){this.submitted=!0,this.isAddressValid()&&(this.submitted=!1,this.currentStep=2,window.scrollTo({top:0,behavior:"smooth"}))}placeOrder(){this.placing=!0,this.cartService.placeOrder({payment_method:this.selectedPayment,shipping_details:this.shipping}).subscribe({next:d=>{this.placing=!1,this.placedOrderId=d._id,this.orderPlaced=!0,this.cartService.loadCart(),window.scrollTo({top:0,behavior:"smooth"})},error:()=>{this.placing=!1,alert("Something went wrong. Please try again.")}})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=P({type:o,selectors:[["app-checkout"]],decls:14,vars:3,consts:[[1,"min-h-screen","bg-gray-50"],[1,"bg-white","border-b","border-gray-100"],[1,"max-w-5xl","mx-auto","px-4","sm:px-6","lg:px-8","py-8"],["routerLink","/cart",1,"flex","items-center","gap-1.5","text-sm","text-gray-500","hover:text-primary","transition-colors","no-underline","mb-3"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M19 12H5"],["d","M12 5l-7 7 7 7"],[1,"text-2xl","font-bold","text-gray-900"],[1,"flex","items-center","gap-2","mt-4"],[4,"ngFor","ngForOf"],["class","max-w-lg mx-auto px-4 py-20 text-center flex flex-col items-center gap-4",4,"ngIf"],["class","max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",4,"ngIf"],[1,"flex","items-center","gap-2"],[1,"w-7","h-7","rounded-full","flex","items-center","justify-center","text-xs","font-bold","transition-all"],["width","13","height","13","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","3",4,"ngIf"],[4,"ngIf"],[1,"text-sm","font-medium"],["class","w-8 h-px bg-gray-200",4,"ngIf"],["width","13","height","13","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","3"],["points","20 6 9 17 4 12"],[1,"w-8","h-px","bg-gray-200"],[1,"max-w-lg","mx-auto","px-4","py-20","text-center","flex","flex-col","items-center","gap-4"],[1,"w-20","h-20","rounded-full","bg-green-100","flex","items-center","justify-center"],["width","36","height","36","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5",1,"text-green-600"],[1,"text-gray-500"],[1,"text-xs","text-gray-400","font-mono","bg-gray-50","px-3","py-1","rounded-lg"],[1,"flex","gap-3","mt-2"],["routerLink","/orders",1,"px-6","py-3","bg-primary","text-white","rounded-xl","text-sm","font-semibold","no-underline","hover:bg-primaryHover","transition-all"],["routerLink","/books",1,"px-6","py-3","border","border-gray-200","text-gray-700","rounded-xl","text-sm","font-semibold","no-underline","hover:bg-gray-50","transition-all"],[1,"grid","grid-cols-1","lg:grid-cols-5","gap-8"],[1,"lg:col-span-3","flex","flex-col","gap-6"],["class","bg-white rounded-2xl shadow-sm p-6",4,"ngIf"],[1,"lg:col-span-2"],[1,"bg-white","rounded-2xl","shadow-sm","p-6","sticky","top-24"],[1,"text-sm","font-bold","text-gray-900","mb-4"],[1,"flex","flex-col","gap-3","max-h-56","overflow-y-auto","pr-1","mb-4"],["class","flex gap-3 items-start",4,"ngFor","ngForOf"],[1,"border-gray-100","mb-4"],[1,"flex","flex-col","gap-2","text-sm"],[1,"flex","justify-between","text-gray-500"],[1,"font-medium","text-gray-800"],[1,"font-medium"],[1,"border-gray-100","my-1"],[1,"flex","justify-between","font-bold","text-gray-900","text-base"],["class","mt-4 p-3 bg-gray-50 rounded-xl text-xs text-gray-500 flex flex-col gap-0.5",4,"ngIf"],[1,"bg-white","rounded-2xl","shadow-sm","p-6"],[1,"text-base","font-bold","text-gray-900","mb-5"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4"],[1,"flex","flex-col","gap-1.5"],[1,"text-xs","font-semibold","text-gray-700","uppercase","tracking-wider"],["type","text","placeholder","John Doe",1,"px-4","py-3","rounded-xl","border","text-sm","outline-none","focus:border-primary","transition-colors",3,"ngModelChange","ngModel"],["type","tel","placeholder","+1 234 567 8900",1,"px-4","py-3","rounded-xl","border","text-sm","outline-none","focus:border-primary","transition-colors",3,"ngModelChange","ngModel"],["class","text-red-500 text-xs mt-1",4,"ngIf"],[1,"sm:col-span-2","flex","flex-col","gap-1.5"],["type","text","placeholder","123 Main St, Apt 4B",1,"px-4","py-3","rounded-xl","border","text-sm","outline-none","focus:border-primary","transition-colors",3,"ngModelChange","ngModel"],["type","text","placeholder","New York",1,"px-4","py-3","rounded-xl","border","text-sm","outline-none","focus:border-primary","transition-colors",3,"ngModelChange","ngModel"],["type","text","placeholder","NY",1,"px-4","py-3","rounded-xl","border","text-sm","outline-none","focus:border-primary","transition-colors",3,"ngModelChange","ngModel"],["type","text","placeholder","United States",1,"px-4","py-3","rounded-xl","border","text-sm","outline-none","focus:border-primary","transition-colors",3,"ngModelChange","ngModel"],["type","text","placeholder","10001",1,"px-4","py-3","rounded-xl","border","text-sm","outline-none","focus:border-primary","transition-colors",3,"ngModelChange","ngModel"],["class","text-xs text-red-500 mt-3",4,"ngIf"],[1,"mt-6","w-full","py-3.5","bg-primary","text-white","text-sm","font-semibold","rounded-xl","hover:bg-primaryHover","transition-all","border-none","cursor-pointer","flex","items-center","justify-center","gap-2",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5"],["d","M5 12h14"],["d","M12 5l7 7-7 7"],[1,"text-red-500","text-xs","mt-1"],[1,"text-xs","text-red-500","mt-3"],[1,"flex","flex-col","gap-3"],["class","flex items-center gap-4 p-4 rounded-xl border-2 cursor-pointer transition-all",3,"border-primary","bg-primary/5","border-gray-200",4,"ngFor","ngForOf"],["class","mt-5 flex flex-col gap-4",4,"ngIf"],[1,"flex","gap-3","mt-6"],[1,"px-6","py-3","border","border-gray-200","text-gray-700","text-sm","font-semibold","rounded-xl","hover:bg-gray-50","transition-all","bg-transparent","cursor-pointer",3,"click"],[1,"flex-1","py-3","bg-primary","text-white","text-sm","font-semibold","rounded-xl","hover:bg-primaryHover","transition-all","border-none","cursor-pointer","flex","items-center","justify-center","gap-2","disabled:opacity-60","disabled:cursor-not-allowed",3,"click","disabled"],["class","animate-spin","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5",4,"ngIf"],[1,"text-center","text-xs","text-gray-400","mt-4"],[1,"flex","items-center","gap-4","p-4","rounded-xl","border-2","cursor-pointer","transition-all"],["type","radio",1,"hidden",3,"ngModelChange","value","ngModel"],[1,"w-10","h-10","rounded-xl","flex","items-center","justify-center","text-lg"],[1,"flex-1"],[1,"text-sm","font-semibold","text-gray-900"],[1,"text-xs","text-gray-400"],[1,"w-4","h-4","rounded-full","border-2","flex","items-center","justify-center"],["class","w-2 h-2 rounded-full bg-primary",4,"ngIf"],[1,"w-2","h-2","rounded-full","bg-primary"],[1,"mt-5","flex","flex-col","gap-4"],["type","text","placeholder","1234 5678 9012 3456","maxlength","19",1,"px-4","py-3","rounded-xl","border","border-gray-200","text-sm","outline-none","focus:border-primary","transition-colors"],[1,"grid","grid-cols-2","gap-4"],["type","text","placeholder","MM / YY",1,"px-4","py-3","rounded-xl","border","border-gray-200","text-sm","outline-none","focus:border-primary","transition-colors"],["type","text","placeholder","123","maxlength","4",1,"px-4","py-3","rounded-xl","border","border-gray-200","text-sm","outline-none","focus:border-primary","transition-colors"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5",1,"animate-spin"],["d","M21 12a9 9 0 1 1-6.219-8.56"],[1,"flex","gap-3","items-start"],[1,"w-10","h-14","rounded-lg","bg-gray-100","flex-shrink-0","overflow-hidden"],["class","w-full h-full object-cover",3,"src","alt",4,"ngIf"],[1,"flex-1","min-w-0"],[1,"text-xs","font-semibold","text-gray-800","truncate"],[1,"text-xs","font-bold","text-gray-900","flex-shrink-0"],[1,"w-full","h-full","object-cover",3,"src","alt"],[1,"mt-4","p-3","bg-gray-50","rounded-xl","text-xs","text-gray-500","flex","flex-col","gap-0.5"],[1,"font-semibold","text-gray-700"]],template:function(e,l){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),C(),i(4,"svg",4),g(5,"path",5)(6,"path",6),t(),a(7," Back to Cart "),t(),E(),i(8,"h1",7),a(9,"Checkout"),t(),i(10,"div",8),c(11,J,8,16,"ng-container",9),t()()(),c(12,Q,15,1,"div",10)(13,pe,30,9,"div",11),t()),e&2&&(n(11),s("ngForOf",l.steps),n(),s("ngIf",l.orderPlaced),n(),s("ngIf",!l.orderPlaced))},dependencies:[F,W,B,A,L,z,D,j,O,N],encapsulation:2})};export{Y as CheckoutComponent};
