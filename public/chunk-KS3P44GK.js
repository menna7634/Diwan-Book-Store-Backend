import{a as G}from"./chunk-B2KEH2H4.js";import{Ca as F,J as C,L as r,Oa as V,P as S,Pa as j,T as g,Va as $,X as I,aa as d,ba as t,ca as i,cb as H,da as c,fb as L,ha as E,ia as B,ja as b,ka as y,la as s,na as T,oa as _,qa as o,ra as w,sa as m,ta as M,v as k,w as f,x as v,y as x,z as h}from"./chunk-VTSCHVBM.js";var Q=()=>[1,2,3];function P(n,a){n&1&&(t(0,"div",7)(1,"div",8),x(),t(2,"svg",9),c(3,"circle",10)(4,"circle",11)(5,"path",12),i()(),h(),t(6,"h3",13),o(7,"Your cart is empty"),i(),t(8,"p",14),o(9,"Looks like you haven't added anything yet."),i(),t(10,"a",15),o(11," Start Exploring "),i()())}function A(n,a){n&1&&(t(0,"div",38),c(1,"div",39),t(2,"div",40),c(3,"div",41)(4,"div",42)(5,"div",43),i()())}function N(n,a){n&1&&(E(0),g(1,A,6,0,"div",37),B()),n&2&&(r(),d("ngForOf",F(1,Q)))}function R(n,a){if(n&1&&c(0,"img",68),n&2){let e=s().$implicit;d("src",e.imageUrl,C),I("alt",e!=null&&e.title?e.title+" book cover":"Book cover image")}}function U(n,a){n&1&&(t(0,"div",69),x(),t(1,"svg",70),c(2,"path",71)(3,"path",72),i()())}function q(n,a){if(n&1){let e=b();t(0,"div",44)(1,"div",45),g(2,R,1,2,"img",46)(3,U,4,0,"div",47),i(),t(4,"div",48)(5,"h3",49),o(6),i(),t(7,"p",50),o(8),i(),t(9,"div",51)(10,"div",52)(11,"button",53),y("click",function(){let p=f(e).$implicit,u=s(2);return v(u.decreaseQty(p))}),x(),t(12,"svg",54),c(13,"line",55),i()(),h(),t(14,"span",56),o(15),i(),t(16,"button",57),y("click",function(){let p=f(e).$implicit,u=s(2);return v(u.increaseQty(p))}),x(),t(17,"svg",54),c(18,"line",58)(19,"line",55),i()()(),h(),t(20,"div",59)(21,"span",60),o(22),i(),t(23,"button",61),y("click",function(){let p=f(e).$implicit,u=s(2);return v(u.removeItem(p.bookId))}),x(),t(24,"svg",62),c(25,"polyline",63)(26,"path",64)(27,"path",65)(28,"path",66)(29,"path",67),i()()()()()()}if(n&2){let e=a.$implicit,l=s(2);_("opacity-60",l.updatingBook===e.bookId||l.removingBook===e.bookId),r(2),d("ngIf",e==null?null:e.imageUrl),r(),d("ngIf",!e.imageUrl),r(3),w(e.title),r(2),m("$",e.price.toFixed(2)," each"),r(3),d("disabled",l.updatingBook===e.bookId),r(4),w(e.quantity),r(),d("disabled",l.updatingBook===e.bookId),r(6),m(" $",(e.price*e.quantity).toFixed(2)," "),r(),d("disabled",l.removingBook===e.bookId)}}function D(n,a){if(n&1&&(t(0,"div",73),o(1),i()),n&2){let e=s(2);r(),m(" Add $",(50-e.cart().subtotal).toFixed(2)," more for free shipping ")}}function z(n,a){if(n&1&&(t(0,"div",74)(1,"div",75),c(2,"div",76),i(),t(3,"p",77),o(4,"Free shipping on orders over $50"),i()()),n&2){let e=s(2);r(2),T("width",e.Math.min(e.cart().subtotal/50*100,100),"%")}}function Y(n,a){if(n&1){let e=b();t(0,"div",16)(1,"div",17),g(2,N,2,2,"ng-container",18)(3,q,30,11,"div",19),t(4,"button",20),y("click",function(){f(e);let p=s();return v(p.clearCart())}),o(5," Clear Cart "),i()(),t(6,"div",21)(7,"div",22)(8,"h2",23),o(9,"Order Summary"),i(),t(10,"div",24)(11,"div",25)(12,"span"),o(13),i(),t(14,"span",26),o(15),i()(),t(16,"div",25)(17,"span"),o(18,"Shipping"),i(),t(19,"span",27),o(20),i()(),g(21,D,2,1,"div",28),c(22,"hr",29),t(23,"div",30)(24,"span"),o(25,"Total"),i(),t(26,"span"),o(27),i()()(),g(28,z,5,2,"div",31),t(29,"a",32),o(30," Proceed to Checkout "),x(),t(31,"svg",33),c(32,"path",34)(33,"path",35),i()(),h(),t(34,"a",36),o(35," Continue Shopping "),i()()()()}if(n&2){let e=s();r(2),d("ngIf",e.loading),r(),d("ngForOf",e.cart().items)("ngForTrackBy",e.trackByBookId),r(10),m("Subtotal (",e.cart().totalItems," items)"),r(2),m("$",e.cart().subtotal.toFixed(2)),r(4),_("text-green-600",e.cart().shipping===0),r(),m(" ",e.cart().shipping===0?"FREE":"$"+e.cart().shipping.toFixed(2)," "),r(),d("ngIf",e.cart().shipping>0),r(6),m("$",e.cart().total.toFixed(2)),r(),d("ngIf",e.cart().shipping>0)}}var O=class n{cartService=k(G);cart=this.cartService.cart;loading=!1;updatingBook=null;removingBook=null;Math=Math;trackByBookId(a,e){return e.bookId}increaseQty(a){this.updatingBook=a.bookId,this.cartService.increaseQuantity(a.bookId).subscribe({complete:()=>this.updatingBook=null,error:()=>this.updatingBook=null})}decreaseQty(a){this.updatingBook=a.bookId,this.cartService.decreaseQuantity(a.bookId).subscribe({complete:()=>this.updatingBook=null,error:()=>this.updatingBook=null})}removeItem(a){this.removingBook=a,this.cartService.removeItem(a).subscribe({complete:()=>this.removingBook=null,error:()=>this.removingBook=null})}clearCart(){confirm("Clear your entire cart?")&&this.cartService.clearCart().subscribe()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=S({type:n,selectors:[["app-cart"]],decls:10,vars:4,consts:[[1,"min-h-screen","bg-gray-50"],[1,"bg-white","border-b","border-gray-100"],[1,"max-w-6xl","mx-auto","px-4","sm:px-6","lg:px-8","py-8"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-sm","text-gray-500","mt-1"],["class","flex flex-col items-center justify-center py-24 gap-4",4,"ngIf"],["class","grid grid-cols-1 lg:grid-cols-3 gap-8",4,"ngIf"],[1,"flex","flex-col","items-center","justify-center","py-24","gap-4"],[1,"w-20","h-20","rounded-full","bg-primary/10","flex","items-center","justify-center"],["width","36","height","36","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5",1,"text-primary"],["cx","9","cy","21","r","1"],["cx","20","cy","21","r","1"],["d","M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"],[1,"text-xl","font-semibold","text-gray-800"],[1,"text-gray-500","text-sm"],["routerLink","/books",1,"mt-2","px-6","py-3","bg-primary","text-white","rounded-xl","text-sm","font-semibold","hover:bg-primaryHover","transition-all","no-underline"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-8"],[1,"lg:col-span-2","flex","flex-col","gap-4"],[4,"ngIf"],["class","bg-white rounded-2xl p-5 flex gap-4 shadow-sm hover:shadow-md transition-shadow group",3,"opacity-60",4,"ngFor","ngForOf","ngForTrackBy"],[1,"self-start","px-4","py-2","text-sm","text-error","hover:bg-error/10","rounded-xl","transition-all","border-none","bg-transparent","cursor-pointer","font-medium",3,"click"],[1,"lg:col-span-1"],[1,"bg-white","rounded-2xl","shadow-sm","p-6","sticky","top-24","flex","flex-col","gap-4"],[1,"text-base","font-bold","text-gray-900"],[1,"flex","flex-col","gap-3","text-sm"],[1,"flex","justify-between","text-gray-600"],[1,"font-medium","text-gray-900"],[1,"font-medium"],["class","text-xs text-gray-400 -mt-1",4,"ngIf"],[1,"border-gray-100"],[1,"flex","justify-between","text-base","font-bold","text-gray-900"],["class","flex flex-col gap-1",4,"ngIf"],["routerLink","/checkout",1,"w-full","py-3.5","bg-primary","text-white","text-sm","font-semibold","rounded-xl","text-center","no-underline","hover:bg-primaryHover","transition-all","flex","items-center","justify-center","gap-2"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5"],["d","M5 12h14"],["d","M12 5l7 7-7 7"],["routerLink","/books",1,"text-center","text-sm","text-primary","hover:underline","no-underline","font-medium"],["class","bg-white rounded-2xl p-5 flex gap-4 animate-pulse",4,"ngFor","ngForOf"],[1,"bg-white","rounded-2xl","p-5","flex","gap-4","animate-pulse"],[1,"w-20","h-28","rounded-xl","bg-gray-200","flex-shrink-0"],[1,"flex-1","flex","flex-col","gap-2","py-1"],[1,"h-4","bg-gray-200","rounded","w-3/4"],[1,"h-3","bg-gray-100","rounded","w-1/2"],[1,"h-4","bg-gray-200","rounded","w-1/4","mt-auto"],[1,"bg-white","rounded-2xl","p-5","flex","gap-4","shadow-sm","hover:shadow-md","transition-shadow","group"],[1,"w-20","h-28","rounded-xl","bg-gray-100","flex-shrink-0","overflow-hidden"],["class","w-full h-full object-cover",3,"src",4,"ngIf"],["class","w-full h-full flex items-center justify-center",4,"ngIf"],[1,"flex-1","flex","flex-col","gap-1","min-w-0"],[1,"text-base","font-bold","text-gray-900","truncate"],[1,"text-sm","text-gray-400"],[1,"flex","items-center","justify-between","mt-auto","pt-2"],[1,"flex","items-center","gap-1","bg-gray-50","rounded-xl","px-1","py-1"],[1,"w-7","h-7","rounded-lg","flex","items-center","justify-center","text-gray-600","hover:bg-white","hover:shadow-sm","transition-all","border-none","bg-transparent","cursor-pointer","disabled:opacity-40","disabled:cursor-not-allowed",3,"click","disabled"],["width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5"],["x1","5","y1","12","x2","19","y2","12"],[1,"w-7","text-center","text-sm","font-bold","text-gray-800"],["aria-label","Increase quantity",1,"w-7","h-7","rounded-lg","flex","items-center","justify-center","text-gray-600","hover:bg-white","hover:shadow-sm","transition-all","border-none","bg-transparent","cursor-pointer","disabled:opacity-40","disabled:cursor-not-allowed",3,"click","disabled"],["x1","12","y1","5","x2","12","y2","19"],[1,"flex","items-center","gap-3"],[1,"text-base","font-bold","text-primary"],["aria-label","Remove Item",1,"w-8","h-8","rounded-xl","flex","items-center","justify-center","text-gray-400","hover:text-error","hover:bg-error/10","transition-all","border-none","bg-transparent","cursor-pointer","opacity-0","group-hover:opacity-100","disabled:cursor-not-allowed",3,"click","disabled"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["points","3 6 5 6 21 6"],["d","M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6"],["d","M10 11v6"],["d","M14 11v6"],["d","M9 6V4h6v2"],[1,"w-full","h-full","object-cover",3,"src"],[1,"w-full","h-full","flex","items-center","justify-center"],["width","28","height","28","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5",1,"text-gray-300"],["d","M4 19.5A2.5 2.5 0 0 1 6.5 17H20"],["d","M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"],[1,"text-xs","text-gray-400","-mt-1"],[1,"flex","flex-col","gap-1"],[1,"h-1.5","bg-gray-100","rounded-full","overflow-hidden"],[1,"h-full","bg-primary","rounded-full","transition-all","duration-500"],[1,"text-xs","text-gray-400"]],template:function(e,l){e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),o(4,"Shopping Cart"),i(),t(5,"p",4),o(6),i()()(),t(7,"div",2),g(8,P,12,0,"div",5)(9,Y,36,11,"div",6),i()()),e&2&&(r(6),M(" ",l.cart().totalItems," item",l.cart().totalItems!==1?"s":""," in your cart "),r(2),d("ngIf",l.cart().items.length===0&&!l.loading),r(),d("ngIf",l.cart().items.length>0))},dependencies:[$,V,j,L,H],encapsulation:2})};export{O as CartComponent};
