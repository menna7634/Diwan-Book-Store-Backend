import{a as H,b as Nt}from"./chunk-5JUGGBCD.js";import{a as U,b as h,c as $,d as Q,e as Bt,f as Ze,g as Y,j as K,k as X,l as Rt,m as jt,n as Ht,o as Ut,p as $t,r as ee,s as Pe,t as te}from"./chunk-YB375EBC.js";import{a as qt}from"./chunk-B2KEH2H4.js";import{$ as V,$a as pe,Aa as Z,B as vt,Ca as se,D as St,Da as bt,E as L,Ea as Mt,Fa as y,Ga as k,Ha as Ce,Ia as $e,J as He,Ja as Tt,K as kt,Ka as Se,L as l,Na as Ft,O as Ie,Oa as ke,P as E,Pa as de,Qa as qe,Ra as It,Sa as Ee,T as C,Ta as me,Ua as Lt,V as Et,Va as R,Wa as Ot,Xa as Ge,Y as _,Ya as ce,Z as v,Za as Vt,_ as O,_a as At,aa as m,ab as ze,ba as r,bb as j,ca as o,cb as D,d as Ne,da as c,db as We,ea as I,eb as Dt,f as ft,fa as T,fb as oe,g as Be,ga as ht,h as z,ha as Le,ia as Oe,j as xt,ja as P,k as ye,ka as u,l as q,la as d,m as Re,n as je,o as W,oa as Ue,p as _t,pa as Ve,qa as a,r as we,ra as S,sa as w,ta as Ae,u as Ct,ua as Pt,v as x,va as ie,w as g,wa as re,x as f,xa as ne,y as b,ya as le,z as F,za as J}from"./chunk-VTSCHVBM.js";var Qe=class t{http=x(ce);baseUrl=H.apiUrl;getAuthors(i){let e=new Ge;return i?.page&&(e=e.set("page",i.page.toString())),i?.limit&&(e=e.set("limit",i.limit.toString())),this.http.get(`${this.baseUrl}/authors`,{params:e})}static \u0275fac=function(e){return new(e||t)};static \u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"root"})};var Yt=t=>["/books",t],Jt=()=>["/books"],Kt=t=>({authorIds:t});function Xt(t,i){t&1&&(r(0,"div",26),a(1," Loading books... "),o())}function ei(t,i){if(t&1&&(r(0,"div",27),a(1),o()),t&2){let e=d();l(),w(" ",e.popularError," ")}}function ti(t,i){t&1&&(r(0,"div",26),a(1," No books available yet. "),o())}function ii(t,i){if(t&1&&c(0,"img",39),t&2){let e=d().$implicit;m("src",e.book_cover_url,He)("alt",e.book_title)}}function ri(t,i){t&1&&(r(0,"div",40),a(1," No cover "),o())}function ni(t,i){if(t&1&&(r(0,"a",30)(1,"div",31),C(2,ii,1,2,"img",32)(3,ri,2,0,"div",33),o(),r(4,"div",34)(5,"h3",35),a(6),o(),r(7,"div",36)(8,"span",37),a(9),y(10,"currency"),o(),r(11,"span",38),a(12),o()()()()),t&2){let e=i.$implicit;m("routerLink",bt(8,Yt,e._id)),l(2),m("ngIf",e.book_cover_url),l(),m("ngIf",!e.book_cover_url),l(3),w(" ",e.book_title," "),l(3),w(" ",k(10,6,e.price)," "),l(3),w(" In stock: ",e.stock," ")}}function oi(t,i){if(t&1&&(r(0,"div",28),C(1,ni,13,10,"a",29),o()),t&2){let e=d();l(),m("ngForOf",e.popularBooks)}}function ai(t,i){t&1&&(r(0,"div",26),a(1," Loading authors... "),o())}function li(t,i){if(t&1&&(r(0,"div",27),a(1),o()),t&2){let e=d();l(),w(" ",e.popularAuthorsError," ")}}function si(t,i){t&1&&(r(0,"div",26),a(1," No authors available yet. "),o())}function di(t,i){if(t&1&&(r(0,"p",47),a(1),o()),t&2){let e=d().$implicit;l(),S(e.bio)}}function mi(t,i){if(t&1&&(r(0,"a",43)(1,"div",44),a(2),o(),r(3,"h3",45),a(4),o(),C(5,di,2,1,"p",46),o()),t&2){let e=i.$implicit;m("routerLink",se(5,Jt))("queryParams",bt(6,Kt,e._id)),l(2),w(" ",e.name.charAt(0)," "),l(2),S(e.name),l(),m("ngIf",e.bio)}}function ci(t,i){if(t&1&&(r(0,"div",41),C(1,mi,6,8,"a",42),o()),t&2){let e=d();l(),m("ngForOf",e.popularAuthors)}}var Ye=class t{bookService=x(Nt);authorService=x(Qe);cdr=x(Se);popularBooks=[];isLoadingPopular=!1;popularError="";popularAuthors=[];isLoadingPopularAuthors=!1;popularAuthorsError="";ngOnInit(){this.loadPopularBooks(),this.loadPopularAuthors()}loadPopularBooks(){this.isLoadingPopular=!0,this.popularError="",this.bookService.getBooks({page:1,limit:4}).subscribe({next:i=>{this.popularBooks=i.data,this.isLoadingPopular=!1,this.cdr.detectChanges()},error:()=>{this.popularError="Failed to load popular books.",this.isLoadingPopular=!1,this.cdr.detectChanges()}})}loadPopularAuthors(){this.isLoadingPopularAuthors=!0,this.popularAuthorsError="",this.authorService.getAuthors({page:1,limit:4}).subscribe({next:i=>{this.popularAuthors=i.data,this.isLoadingPopularAuthors=!1,this.cdr.detectChanges()},error:()=>{this.popularAuthorsError="Failed to load popular authors.",this.isLoadingPopularAuthors=!1,this.cdr.detectChanges()}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=E({type:t,selectors:[["app-home"]],decls:50,vars:8,consts:[[1,"bg-light","min-h-[calc(100vh-80px)]","flex","flex-col","pt-16"],[1,"max-w-6xl","mx-auto","px-6","w-full","flex-grow","flex","flex-col","md:flex-row","items-center","justify-between","gap-12","mt-8","md:mt-20"],[1,"flex-1","flex","flex-col","gap-6","text-center","md:text-left","z-10"],[1,"text-primary","font-bold","uppercase","tracking-wider","text-sm","bg-primary/10","w-fit","md:mx-0","mx-auto","px-3","py-1","rounded-full"],[1,"text-5xl","md:text-7xl","font-extrabold","text-textMain","leading-tight"],[1,"text-primary"],[1,"text-lg","text-textSub","max-w-lg","mx-auto","md:mx-0","leading-relaxed"],[1,"flex","items-center","gap-4","justify-center","md:justify-start","mt-4"],["routerLink","/books",1,"bg-primary","hover:bg-primaryHover","text-white","px-8","py-3.5","rounded-full","font-bold","transition-all","shadow-lg","shadow-primary/30","no-underline","hover:-translate-y-1"],["routerLink","/categories",1,"bg-white","border-2","border-gray-100","hover:border-gray-200","hover:bg-gray-50","text-textMain","px-8","py-3.5","rounded-full","font-bold","transition-all","no-underline"],[1,"flex-1","relative","w-full","max-w-md","hidden","md:block","aspect-square"],[1,"absolute","inset-0","bg-primary/5","rounded-full","drop-shadow-2xl","translate-x-4","translate-y-4"],[1,"absolute","inset-0","bg-white","rounded-full","p-8","shadow-xl","flex","items-center","justify-center","border-4","border-gray-50","flex-col","gap-3"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.2","stroke","currentColor",1,"w-32","h-32","text-primary"],["stroke-linecap","round","stroke-linejoin","round","d","M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"],[1,"bg-primary","text-white","text-xs","font-bold","px-4","py-1.5","rounded-full","shadow-md","mt-4","animate-bounce"],[1,"w-full","h-24","bg-gradient-to-t","from-white","to-transparent","mt-12","bg-white","flex-shrink-0"],[1,"bg-white","py-16"],[1,"max-w-6xl","mx-auto","px-6","w-full","flex","flex-col","gap-24"],[1,"flex","items-center","justify-between","mb-8"],[1,"text-3xl","font-extrabold","text-textMain","tracking-tight"],[1,"text-textSub","mt-2","text-sm"],["class","text-textSub",4,"ngIf"],["class","text-error",4,"ngIf"],["class","grid grid-cols-2 md:grid-cols-4 gap-6",4,"ngIf"],["class","grid grid-cols-2 lg:grid-cols-4 gap-6",4,"ngIf"],[1,"text-textSub"],[1,"text-error"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-6"],["class","group bg-white rounded-2xl border border-gray-100 overflow-hidden hover:shadow-xl hover:border-primary/20 transition-all duration-300 flex flex-col h-full cursor-pointer no-underline text-inherit",3,"routerLink",4,"ngFor","ngForOf"],[1,"group","bg-white","rounded-2xl","border","border-gray-100","overflow-hidden","hover:shadow-xl","hover:border-primary/20","transition-all","duration-300","flex","flex-col","h-full","cursor-pointer","no-underline","text-inherit",3,"routerLink"],[1,"h-64","bg-gray-100","w-full","relative","flex","items-center","justify-center","p-2"],["class","w-full h-full object-contain rounded",3,"src","alt",4,"ngIf"],["class","w-full h-full bg-gray-200 rounded shadow-sm flex items-center justify-center text-gray-400",4,"ngIf"],[1,"p-5","flex","flex-col","flex-grow"],[1,"font-bold","text-textMain","text-base","leading-snug","line-clamp-2","md:h-12","mb-1","group-hover:text-primary","transition-colors"],[1,"mt-auto","flex","items-center","justify-between"],[1,"font-extrabold","text-lg","text-price"],[1,"text-xs","text-textSub"],[1,"w-full","h-full","object-contain","rounded",3,"src","alt"],[1,"w-full","h-full","bg-gray-200","rounded","shadow-sm","flex","items-center","justify-center","text-gray-400"],[1,"grid","grid-cols-2","lg:grid-cols-4","gap-6"],["class","bg-white rounded-2xl border border-gray-100 p-6 flex flex-col items-center text-center hover:border-primary/30 hover:shadow-lg transition-all cursor-pointer group no-underline text-inherit",3,"routerLink","queryParams",4,"ngFor","ngForOf"],[1,"bg-white","rounded-2xl","border","border-gray-100","p-6","flex","flex-col","items-center","text-center","hover:border-primary/30","hover:shadow-lg","transition-all","cursor-pointer","group","no-underline","text-inherit",3,"routerLink","queryParams"],[1,"w-24","h-24","rounded-full","bg-gray-100","mb-4","overflow-hidden","border-4","border-white","shadow-sm","flex","items-center","justify-center","text-2xl","font-bold","text-primary","group-hover:scale-105","transition-transform","duration-300"],[1,"font-bold","text-textMain","text-lg"],["class","text-sm text-textSub mt-1 line-clamp-2",4,"ngIf"],[1,"text-sm","text-textSub","mt-1","line-clamp-2"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),a(4," Welcome to Diwan "),o(),r(5,"h1",4),a(6," Discover Your "),c(7,"br"),a(8," Next "),r(9,"span",5),a(10,"Great Read"),o()(),r(11,"p",6),a(12," Explore thousands of books, from timeless classics to the latest bestsellers. Delivered straight to your door. "),o(),r(13,"div",7)(14,"a",8),a(15," Start Exploring "),o(),r(16,"a",9),a(17," View Offers "),o()()(),r(18,"div",10),c(19,"div",11),r(20,"div",12),b(),r(21,"svg",13),c(22,"path",14),o(),F(),r(23,"div",15),a(24," 20+ Books Available "),o()()()(),c(25,"div",16),o(),r(26,"div",17)(27,"div",18)(28,"section")(29,"div",19)(30,"div")(31,"h2",20),a(32,"Popular Books"),o(),r(33,"p",21),a(34,"Trending reads that everyone is talking about."),o()()(),C(35,Xt,2,0,"div",22)(36,ei,2,1,"div",23)(37,ti,2,0,"div",22)(38,oi,2,1,"div",24),o(),r(39,"section")(40,"div",19)(41,"div")(42,"h2",20),a(43,"Popular Authors"),o(),r(44,"p",21),a(45,"Discover the most influential writers in the website."),o()()(),C(46,ai,2,0,"div",22)(47,li,2,1,"div",23)(48,si,2,0,"div",22)(49,ci,2,1,"div",25),o()()()),e&2&&(l(35),m("ngIf",n.isLoadingPopular),l(),m("ngIf",!n.isLoadingPopular&&n.popularError),l(),m("ngIf",!n.isLoadingPopular&&!n.popularError&&n.popularBooks.length===0),l(),m("ngIf",!n.isLoadingPopular&&!n.popularError&&n.popularBooks.length>0),l(8),m("ngIf",n.isLoadingPopularAuthors),l(),m("ngIf",!n.isLoadingPopularAuthors&&n.popularAuthorsError),l(),m("ngIf",!n.isLoadingPopularAuthors&&!n.popularAuthorsError&&n.popularAuthors.length===0),l(),m("ngIf",!n.isLoadingPopularAuthors&&!n.popularAuthorsError&&n.popularAuthors.length>0))},dependencies:[oe,D,R,ke,de,Lt],encapsulation:2})};var M=class t{http=x(ce);_user$=new Ne(null);user$=this._user$.asObservable();register(i){return this.http.post(`${H.apiUrl}/auth/register`,i)}login(i,e){return this.http.post(`${H.apiUrl}/auth/login`,{email:i,password:e}).pipe(W(n=>this.saveTokens(n)),je(n=>this.getUserProfile()),W(n=>this._user$.next(n)))}getUserProfile(){return this.http.get(`${H.apiUrl}/profile`)}verify(i){return this.http.get(`${H.apiUrl}/auth/verify?token=${i}`)}updateUserProfile(i){return this.http.patch(`${H.apiUrl}/profile`,i).pipe(W(e=>this._user$.next(e)))}forgetPassword(i){return this.http.post(`${H.apiUrl}/auth/forget-password`,{email:i})}resetPassword(i,e){return this.http.post(`${H.apiUrl}/auth/reset-password`,{password:i,token:e})}logout(){return this.http.post(`${H.apiUrl}/auth/logout`,null).pipe(q(()=>{this.clearTokens(),this._user$.next(null)}))}hydrate(){return this.getAccessToken()?this.getUserProfile().pipe(W(i=>this._user$.next(i)),xt(()=>(this.clearTokens(),ft(null)))):ft(null)}refreshAccessToken(){return this.http.post(`${H.apiUrl}/auth/refresh`,{refresh_token:localStorage.getItem("refresh_token")}).pipe(W(i=>localStorage.setItem("access_token",i.access_token)),xt(i=>(this.clearTokens(),this._user$.next(null),Be(()=>i))))}getAccessToken(){return localStorage.getItem("access_token")}saveTokens(i){localStorage.setItem("access_token",i.access_token),localStorage.setItem("refresh_token",i.refresh_token)}clearTokens(){localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token")}static \u0275fac=function(e){return new(e||t)};static \u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"root"})};function pi(t,i){t&1&&(r(0,"small",20),a(1,"Required"),o())}function ui(t,i){t&1&&(r(0,"small",20),a(1,"invalid email"),o())}function gi(t,i){if(t&1&&(r(0,"small",20),a(1),o()),t&2){d(2);let e=Z(3);l(),S(e==null||e.errors==null?null:e.errors.serverError)}}function fi(t,i){if(t&1&&(r(0,"div",9),_(1,pi,2,0,"small",20),_(2,ui,2,0,"small",20),_(3,gi,2,1,"small",20),o()),t&2){d();let e=Z(3);l(),v(!(e==null||e.errors==null)&&e.errors.required?1:-1),l(),v(!(e==null||e.errors==null)&&e.errors.email?2:-1),l(),v(!(e==null||e.errors==null)&&e.errors.serverError?3:-1)}}function xi(t,i){t&1&&(b(),r(0,"svg",14),c(1,"path",21),o())}function _i(t,i){t&1&&(b(),r(0,"svg",14),c(1,"path",22)(2,"path",23),o())}function vi(t,i){t&1&&(r(0,"small",15),a(1,"required"),o())}var Je=class t{authService=x(M);route=x(pe);router=x(j);fb=x(ee);returnUrl="/";loginForm=this.fb.group({email:["",[h.required,h.email]],password:["",[h.required,h.minLength(6)]]});ngOnInit(){this.returnUrl=this.route.snapshot.queryParamMap.get("returnUrl")||"/",this.loginForm.valueChanges.subscribe(()=>{let i=this.loginForm.get("email");i?.hasError("serverError")&&(i.setErrors(null),i.updateValueAndValidity({emitEvent:!1}))})}errorMessage="";showPassword=!1;togglePassword(){this.showPassword=!this.showPassword}onSubmit(){if(this.loginForm.valid){console.log(this.loginForm);let i=this.loginForm.value.email||"",e=this.loginForm.value.password||"";this.authService.login(i,e).subscribe({next:n=>{this.router.navigateByUrl(this.returnUrl)},error:n=>{n.status===401&&(console.log("setting error"),this.loginForm.get("email")?.setErrors({serverError:"Email or Password is wrong"}),console.error(this.loginForm))}})}}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=E({type:t,selectors:[["app-login"]],decls:34,vars:6,consts:[[1,"bg-light","min-h-[calc(100vh-80px)]","flex","flex-col","pt-16"],[1,"w-full","max-w-sm","mx-auto"],[1,"mx-auto","bg-card","shadow-xl","border","border-gray-100","p-8","rounded-xl"],[1,"text-center","mb-8"],[1,"text-3xl","font-extrabold","text-gray-900","tracking-tight"],[1,"text-gray-500","mt-2","text-sm"],["action","#",1,"space-y-5",3,"ngSubmit","formGroup"],["for","email",1,"block","font-medium","mb-1"],["type","email","id","email","formControlName","email",1,"w-full","border","border-gray-300","rounded-lg","min-h-10","p-2","focus:ring-2","focus:ring-primary","focus:border-transparent","outline-none","transition-all"],[1,"error","mt-1"],["for","password",1,"block","font-medium","mb-1"],[1,"relative"],["id","password","formControlName","password",1,"w-full","border","border-gray-300","rounded-lg","min-h-10","p-2","pr-10","focus:ring-2","focus:ring-primary","focus:border-transparent","outline-none","transition-all",3,"type"],["type","button",1,"absolute","inset-y-0","right-0","pr-3","flex","items-center","text-sm","leading-5",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-5","h-5","text-gray-500","hover:text-gray-700"],[1,"text-error","mt-1","block"],["type","submit",1,"w-full","px-4","py-2","mt-2","rounded-xl","text-md","font-semibold","text-white","no-underline","bg-primary","hover:bg-primaryHover","transition-all","focus:ring-2","focus:ring-offset-2","focus:ring-primary","outline-none"],[1,"mt-6","text-center","text-sm","text-gray-600"],["routerLink","/forget-password",1,"text-primary","font-semibold","hover:underline"],["routerLink","/register",1,"text-primary","font-semibold","hover:underline"],[1,"text-error"],["stroke-linecap","round","stroke-linejoin","round","d","M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"],["stroke-linecap","round","stroke-linejoin","round","d","M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"],["stroke-linecap","round","stroke-linejoin","round","d","M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"]],template:function(e,n){if(e&1){let s=P();r(0,"div",0)(1,"div",1)(2,"div",2),le(3),r(4,"div",3)(5,"h1",4),a(6,"Welcome Back"),o(),r(7,"p",5),a(8,"Sign in to your account to continue"),o()(),r(9,"form",6),u("ngSubmit",function(){return g(s),f(n.onSubmit())}),r(10,"div")(11,"label",7),a(12,"email"),o(),c(13,"input",8),_(14,fi,4,3,"div",9),o(),r(15,"div")(16,"label",10),a(17,"password"),o(),r(18,"div",11),c(19,"input",12),r(20,"button",13),u("click",function(){return g(s),f(n.togglePassword())}),_(21,xi,2,0,":svg:svg",14)(22,_i,3,0,":svg:svg",14),o()(),_(23,vi,2,0,"small",15),o(),r(24,"button",16),a(25,"Login"),o()(),r(26,"p",17),a(27," forgot password? "),r(28,"a",18),a(29,"click here"),o()(),r(30,"p",17),a(31," Don't have an account? "),r(32,"a",19),a(33,"Sign up now"),o()()()()()}if(e&2){l(3);let s=J(n.loginForm.get("email")),p=n.loginForm.get("password");l(6),m("formGroup",n.loginForm),l(5),v(s!=null&&s.invalid&&(s!=null&&s.dirty||s!=null&&s.touched)?14:-1),l(5),m("type",n.showPassword?"text":"password"),l(2),v(n.showPassword?21:22),l(2),v(p!=null&&p.invalid&&(p!=null&&p.dirty||p!=null&&p.touched)?23:-1)}},dependencies:[te,Y,U,$,Q,X,K,D],encapsulation:2})};var De=(t,i)=>i.key;function hi(t,i){if(t&1&&(r(0,"small",40),a(1),o()),t&2){let e=i.$implicit,n=d(2);l(),S(n.getErrorMessage(e.key,e.value))}}function bi(t,i){if(t&1&&(r(0,"div",9),O(1,hi,2,1,"small",40,De),y(3,"keyvalue"),o()),t&2){d();let e=Z(3);l(),V(k(3,0,e==null?null:e.errors))}}function yi(t,i){if(t&1&&(r(0,"small",40),a(1),o()),t&2){let e=i.$implicit,n=d(2);l(),S(n.getErrorMessage(e.key,e.value))}}function wi(t,i){if(t&1&&(r(0,"div",9),O(1,yi,2,1,"small",40,De),y(3,"keyvalue"),o()),t&2){d();let e=Z(4);l(),V(k(3,0,e==null?null:e.errors))}}function Ci(t,i){if(t&1&&(r(0,"small",40),a(1),o()),t&2){let e=i.$implicit,n=d(2);l(),S(n.getErrorMessage(e.key,e.value))}}function Si(t,i){if(t&1&&(r(0,"div",9),O(1,Ci,2,1,"small",40,De),y(3,"keyvalue"),o()),t&2){d();let e=Z(5);l(),V(k(3,0,e==null?null:e.errors))}}function ki(t,i){t&1&&(b(),r(0,"svg",18),c(1,"path",41),o())}function Ei(t,i){t&1&&(b(),r(0,"svg",18),c(1,"path",42)(2,"path",43),o())}function Pi(t,i){if(t&1&&(r(0,"small",40),a(1),o()),t&2){let e=i.$implicit,n=d(2);l(),S(n.getErrorMessage(e.key,e.value))}}function Mi(t,i){if(t&1&&(O(0,Pi,2,1,"small",40,De),y(2,"keyvalue")),t&2){d();let e=Z(6);V(k(2,0,e==null?null:e.errors))}}function Ti(t,i){t&1&&(b(),r(0,"svg",18),c(1,"path",41),o())}function Fi(t,i){t&1&&(b(),r(0,"svg",18),c(1,"path",42)(2,"path",43),o())}function Ii(t,i){t&1&&(r(0,"small",21),a(1,"passwords should match"),o())}function Li(t,i){if(t&1&&(r(0,"small",40),a(1),o()),t&2){let e=i.$implicit,n=d(2);l(),S(n.getErrorMessage(e.key,e.value))}}function Oi(t,i){if(t&1&&(O(0,Li,2,1,"small",40,De),y(2,"keyvalue")),t&2){d();let e=Z(7);V(k(2,0,e==null?null:e.errors))}}function Vi(t,i){t&1&&(r(0,"small",28),a(1,"required"),o())}function Ai(t,i){t&1&&(r(0,"small",28),a(1,"required"),o())}function Di(t,i){t&1&&(r(0,"small",28),a(1,"required"),o())}function Ni(t,i){t&1&&(r(0,"small",28),a(1,"required"),o())}function Bi(t,i){t&1&&(r(0,"small",28),a(1,"required"),o())}var Ri=t=>{let i=t.get("password"),e=t.get("password_confirm");return i?.value!=e?.value?(e?.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):(e?.setErrors(null),null)},ji=t=>{let i=new Date(t.value),e=new Date;return e.setHours(0,0,0),t.value&&i>e?{futureDate:!0}:null},Ke=class t{fb=x(ee);authService=x(M);router=x(j);pending=new Ne(!1);showPassword=!1;showPasswordConfirm=!1;serverErrorMessages={};registerForm=this.fb.group({email:["",[h.required,h.email]],password:["",[h.required,h.minLength(8),h.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])/)]],password_confirm:["",[h.required]],firstname:["",[h.required,h.minLength(2),h.maxLength(50)]],lastname:["",[h.required,h.minLength(2),h.maxLength(50)]],dob:["",[h.required,ji]],address_street:["",[h.required]],address_city:["",[h.required]],address_state:["",[h.required]],address_country:["",[h.required]],address_zip_code:["",[h.required]]},{validators:Ri});onSubmit(){if(this.registerForm.invalid){this.registerForm.markAllAsTouched();return}this.pending.next(!0),this.authService.register({firstname:this.registerForm.get("firstname")?.value||"",lastname:this.registerForm.get("lastname")?.value||"",email:this.registerForm.get("email")?.value||"",password:this.registerForm.get("password")?.value||"",dob:new Date(this.registerForm.get("dob")?.value||""),address:{street:this.registerForm.get("address_street")?.value||"",city:this.registerForm.get("address_city")?.value||"",state:this.registerForm.get("address_state")?.value||"",country:this.registerForm.get("address_country")?.value||"",zipCode:this.registerForm.get("address_zip_code")?.value||""}}).pipe(q(()=>this.pending.next(!1))).subscribe({next:i=>{console.log(i),this.router.navigateByUrl("/login")},error:i=>{i.error.details==="Email already used"?this.registerForm.get("email")?.setErrors({emailUsed:!0}):i.error.details&&this.populateFieldErrors(i.error.details),console.error(i)}})}populateFieldErrors(i){for(let e=0;e<i.length;e++){let n=i[e],s=n.context.key,p=n.message;this.registerForm.get(s)?.setErrors({[`${s}ServerError`]:!0}),this.serverErrorMessages[`${s}ServerError`]=p}}getErrorMessage(i,e){return{required:"This field is required.",email:"Please enter a valid email address.",minlength:`Minimum length is ${e?.requiredLength} characters.`,maxlength:`Maximum length is ${e?.requiredLength} characters.`,futureDate:"can't have future date for date of birth.",pattern:"Password must contain a mix of letters, numbers, and special characters.",emailUsed:"Email already in use"}[i]||this.serverErrorMessages[i]||"Invalid input."}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=E({type:t,selectors:[["app-register"]],decls:85,vars:24,consts:[[1,"bg-light","min-h-[calc(100vh-80px)]","flex","flex-col","pt-16","pb-12"],[1,"w-full","max-w-lg","mx-auto","px-4"],[1,"mx-auto","bg-card","shadow-xl","border","border-gray-100","p-8","rounded-xl"],[1,"text-center","mb-8"],[1,"text-3xl","font-extrabold","text-gray-900","tracking-tight"],[1,"text-gray-500","mt-2","text-sm"],["action","#",1,"space-y-5",3,"ngSubmit","formGroup"],["for","firstname",1,"block"],["type","text","formControlName","firstname",1,"w-full","border","border-gray-300","rounded-lg","min-h-10","p-2","focus:ring-2","focus:ring-primary","focus:border-transparent","outline-none","transition-all"],[1,"error"],["for","lastname",1,"block"],["type","text","formControlName","lastname",1,"w-full","border","border-gray-300","rounded-lg","min-h-10","p-2","focus:ring-2","focus:ring-primary","focus:border-transparent","outline-none","transition-all"],["for","email",1,"block"],["type","email","formControlName","email",1,"w-full","border","border-gray-300","rounded-lg","min-h-10","p-2","focus:ring-2","focus:ring-primary","focus:border-transparent","outline-none","transition-all"],["for","password",1,"block","font-medium","mb-1"],[1,"relative"],["id","password","formControlName","password",1,"w-full","border","border-gray-300","rounded-lg","min-h-10","p-2","pr-10","focus:ring-2","focus:ring-primary","focus:border-transparent","outline-none","transition-all",3,"type"],["type","button",1,"absolute","inset-y-0","right-0","pr-3","flex","items-center","text-sm","leading-5",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-5","h-5","text-gray-500","hover:text-gray-700"],["for","password_confirm",1,"block","font-medium","mb-1"],["id","password_confirm","formControlName","password_confirm",1,"w-full","border","border-gray-300","rounded-lg","min-h-10","p-2","pr-10","focus:ring-2","focus:ring-primary","focus:border-transparent","outline-none","transition-all",3,"type"],[1,"text-error"],["for","dob",1,"block"],["type","date","formControlName","dob",1,"w-full","border","border-gray-300","rounded-lg","min-h-10","p-2","focus:ring-2","focus:ring-primary","focus:border-transparent","outline-none","transition-all"],[1,"grid","grid-cols-2","gap-4"],[1,"col-span-2"],["for","address_street",1,"block","font-medium","mb-1"],["type","text","formControlName","address_street",1,"w-full","border","border-gray-300","rounded-lg","min-h-10","p-2","focus:ring-2","focus:ring-primary","focus:border-transparent","outline-none","transition-all"],[1,"text-error","mt-1","block"],["for","address_city",1,"block","font-medium","mb-1"],["type","text","formControlName","address_city",1,"w-full","border","border-gray-300","rounded-lg","min-h-10","p-2","focus:ring-2","focus:ring-primary","focus:border-transparent","outline-none","transition-all"],["for","address_state",1,"block","font-medium","mb-1"],["type","text","formControlName","address_state",1,"w-full","border","border-gray-300","rounded-lg","min-h-10","p-2","focus:ring-2","focus:ring-primary","focus:border-transparent","outline-none","transition-all"],["for","address_country",1,"block","font-medium","mb-1"],["type","text","formControlName","address_country",1,"w-full","border","border-gray-300","rounded-lg","min-h-10","p-2","focus:ring-2","focus:ring-primary","focus:border-transparent","outline-none","transition-all"],["for","address_zip_code",1,"block","font-medium","mb-1"],["type","text","formControlName","address_zip_code",1,"w-full","border","border-gray-300","rounded-lg","min-h-10","p-2","focus:ring-2","focus:ring-primary","focus:border-transparent","outline-none","transition-all"],["type","submit",1,"w-full","px-4","py-2","mt-4","rounded-xl","text-md","font-semibold","text-white","no-underline","bg-primary","hover:bg-primaryHover","transition-all","disabled:opacity-50","disabled:cursor-not-allowed","focus:ring-2","focus:ring-offset-2","focus:ring-primary","outline-none",3,"disabled"],[1,"mt-6","text-center","text-sm","text-gray-600"],["routerLink","/login",1,"text-primary","font-semibold","hover:underline"],[1,"text-error","block"],["stroke-linecap","round","stroke-linejoin","round","d","M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"],["stroke-linecap","round","stroke-linejoin","round","d","M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"],["stroke-linecap","round","stroke-linejoin","round","d","M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"]],template:function(e,n){if(e&1){let s=P();r(0,"div",0)(1,"div",1)(2,"div",2),le(3)(4)(5)(6)(7),r(8,"div",3)(9,"h1",4),a(10,"Create an Account"),o(),r(11,"p",5),a(12,"Join us today to get started"),o()(),r(13,"form",6),u("ngSubmit",function(){return g(s),f(n.onSubmit())}),r(14,"div")(15,"label",7),a(16,"firstname"),o(),c(17,"input",8),_(18,bi,4,2,"div",9),o(),r(19,"div")(20,"label",10),a(21,"lastname"),o(),c(22,"input",11),_(23,wi,4,2,"div",9),o(),r(24,"div")(25,"label",12),a(26,"email"),o(),c(27,"input",13),_(28,Si,4,2,"div",9),o(),r(29,"div")(30,"label",14),a(31,"password"),o(),r(32,"div",15),c(33,"input",16),r(34,"button",17),u("click",function(){return g(s),f(n.showPassword=!n.showPassword)}),_(35,ki,2,0,":svg:svg",18)(36,Ei,3,0,":svg:svg",18),o()(),_(37,Mi,3,2),o(),r(38,"div")(39,"label",19),a(40,"password confirm"),o(),r(41,"div",15),c(42,"input",20),r(43,"button",17),u("click",function(){return g(s),f(n.showPasswordConfirm=!n.showPasswordConfirm)}),_(44,Ti,2,0,":svg:svg",18)(45,Fi,3,0,":svg:svg",18),o()(),_(46,Ii,2,0,"small",21),o(),r(47,"div")(48,"label",22),a(49,"dob"),o(),c(50,"input",23),_(51,Oi,3,2),o(),r(52,"div",24)(53,"div",25)(54,"label",26),a(55,"street"),o(),c(56,"input",27),_(57,Vi,2,0,"small",28),o(),r(58,"div")(59,"label",29),a(60,"city"),o(),c(61,"input",30),_(62,Ai,2,0,"small",28),o(),r(63,"div")(64,"label",31),a(65,"state"),o(),c(66,"input",32),_(67,Di,2,0,"small",28),o(),r(68,"div")(69,"label",33),a(70,"country"),o(),c(71,"input",34),_(72,Ni,2,0,"small",28),o(),r(73,"div")(74,"label",35),a(75,"zip code"),o(),c(76,"input",36),_(77,Bi,2,0,"small",28),o()(),r(78,"button",37),y(79,"async"),a(80,"Register"),o()(),r(81,"p",38),a(82," Already have an account? "),r(83,"a",39),a(84,"Log in now"),o()()()()()}if(e&2){l(3);let s=J(n.registerForm.get("firstname"));l();let p=J(n.registerForm.get("lastname"));l();let N=J(n.registerForm.get("email"));l();let ae=J(n.registerForm.get("password")),G=n.registerForm.get("password_confirm");l();let fe=J(n.registerForm.get("dob")),xe=n.registerForm.get("address_street"),_e=n.registerForm.get("address_city"),ve=n.registerForm.get("address_state"),he=n.registerForm.get("address_country"),be=n.registerForm.get("address_zip_code");l(6),m("formGroup",n.registerForm),l(5),v(s!=null&&s.invalid&&(s!=null&&s.dirty||s!=null&&s.touched)?18:-1),l(5),v(p!=null&&p.invalid&&(p!=null&&p.dirty||p!=null&&p.touched)?23:-1),l(5),v(N!=null&&N.invalid&&(N!=null&&N.dirty||N!=null&&N.touched)?28:-1),l(5),m("type",n.showPassword?"text":"password"),l(2),v(n.showPassword?35:36),l(2),v(ae!=null&&ae.invalid&&(ae!=null&&ae.dirty||ae!=null&&ae.touched)?37:-1),l(5),m("type",n.showPasswordConfirm?"text":"password"),l(2),v(n.showPasswordConfirm?44:45),l(2),v(G!=null&&G.invalid&&(G!=null&&G.dirty||G!=null&&G.touched)?46:-1),l(5),v(fe!=null&&fe.invalid&&(fe!=null&&fe.dirty||fe!=null&&fe.touched)?51:-1),l(6),v(xe!=null&&xe.invalid&&(xe!=null&&xe.dirty||xe!=null&&xe.touched)?57:-1),l(5),v(_e!=null&&_e.invalid&&(_e!=null&&_e.dirty||_e!=null&&_e.touched)?62:-1),l(5),v(ve!=null&&ve.invalid&&(ve!=null&&ve.dirty||ve!=null&&ve.touched)?67:-1),l(5),v(he!=null&&he.invalid&&(he!=null&&he.dirty||he!=null&&he.touched)?72:-1),l(5),v(be!=null&&be.invalid&&(be!=null&&be.dirty||be!=null&&be.touched)?77:-1),l(),m("disabled",k(79,22,n.pending))}},dependencies:[te,Y,U,$,Q,X,K,D,me,qe],encapsulation:2})};var Te=(t,i)=>{let e=x(M),n=x(j);return e.user$.pipe(ye(1),z(s=>!s),W(s=>{s||n.navigateByUrl("/")}))};var Hi=(t,i)=>({"w-64":t,"w-20 hidden md:block":i}),Ui=()=>({exact:!0});function $i(t,i){t&1&&(r(0,"span"),a(1,"Dashboard"),o())}function qi(t,i){t&1&&(r(0,"span"),a(1,"Orders"),o())}function Gi(t,i){t&1&&(r(0,"span"),a(1,"Authors"),o())}function zi(t,i){t&1&&(r(0,"span"),a(1,"Books"),o())}function Wi(t,i){t&1&&(r(0,"span"),a(1,"Categories"),o())}var Xe=class t{isSidebarOpen=L(!0);toggleSidebar(){this.isSidebarOpen.update(i=>!i)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=E({type:t,selectors:[["app-admin-panel"]],decls:41,vars:11,consts:[[1,"flex","flex-col","md:flex-row","min-h-screen","bg-gray-100","font-sans"],[1,"bg-white","shadow-lg","transition-all","duration-300","ease-in-out","fixed","md:static","inset-y-0","left-0","z-50",3,"ngClass"],[1,"p-4","flex","items-center","justify-between","border-b"],[1,"p-2","rounded-full","hover:bg-gray-200",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16m-7 6h7"],[1,"py-4"],[1,"space-y-2"],["routerLink","dashboard","routerLinkActive","bg-gray-100","title","Dashboard",1,"flex","items-center","space-x-3","px-4","py-2","hover:bg-gray-100","rounded-lg","transition-colors",3,"routerLinkActiveOptions"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"],["routerLink","orders","routerLinkActive","bg-gray-100","title","Orders",1,"flex","items-center","space-x-3","px-4","py-2","hover:bg-gray-100","rounded-lg","transition-colors"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"],["routerLink","authors","routerLinkActive","bg-gray-100","title","Authors",1,"flex","items-center","space-x-3","px-4","py-2","hover:bg-gray-100","rounded-lg","transition-colors"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"],["routerLink","books","routerLinkActive","bg-gray-100","title","Books",1,"flex","items-center","space-x-3","px-4","py-2","hover:bg-gray-100","rounded-lg","transition-colors"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"],["routerLink","categories","routerLinkActive","bg-gray-100","title","Categories",1,"flex","items-center","space-x-3","px-4","py-2","hover:bg-gray-100","rounded-lg","transition-colors"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"],[1,"flex-1","p-4","md:p-6","overflow-y-auto"],[1,"md:hidden","flex","justify-between","items-center","mb-4"],[1,"text-xl","font-bold","text-gray-800"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["d","M4 6h16M4 12h16m-7 6h7"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"aside",1)(2,"div",2)(3,"button",3),u("click",function(){return n.toggleSidebar()}),b(),r(4,"svg",4),c(5,"path",5),o()()(),F(),r(6,"nav",6)(7,"ul",7)(8,"li")(9,"a",8),b(),r(10,"svg",9),c(11,"path",10),o(),_(12,$i,2,0,"span"),o()(),F(),r(13,"li")(14,"a",11),b(),r(15,"svg",9),c(16,"path",12),o(),_(17,qi,2,0,"span"),o()(),F(),r(18,"li")(19,"a",13),b(),r(20,"svg",9),c(21,"path",14),o(),_(22,Gi,2,0,"span"),o()(),F(),r(23,"li")(24,"a",15),b(),r(25,"svg",9),c(26,"path",16),o(),_(27,zi,2,0,"span"),o()(),F(),r(28,"li")(29,"a",17),b(),r(30,"svg",9),c(31,"path",18),o(),_(32,Wi,2,0,"span"),o()()()()(),F(),r(33,"main",19)(34,"div",20)(35,"h1",21),a(36,"E-Commerce"),o(),r(37,"button",3),u("click",function(){return n.toggleSidebar()}),b(),r(38,"svg",22),c(39,"path",23),o()()(),F(),c(40,"router-outlet"),o()()),e&2&&(l(),m("ngClass",Mt(7,Hi,n.isSidebarOpen(),!n.isSidebarOpen())),l(8),m("routerLinkActiveOptions",se(10,Ui)),l(3),v(n.isSidebarOpen()?12:-1),l(5),v(n.isSidebarOpen()?17:-1),l(5),v(n.isSidebarOpen()?22:-1),l(5),v(n.isSidebarOpen()?27:-1),l(5),v(n.isSidebarOpen()?32:-1))},dependencies:[Ft,oe,ze,D,We],encapsulation:2})};var et=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=E({type:t,selectors:[["app-dashboard"]],decls:2,vars:0,template:function(e,n){e&1&&(I(0,"p"),a(1,"dashboard works!"),T())},encapsulation:2})};var Zi=()=>[1,2,3,4,5];function Qi(t,i){if(t&1&&(r(0,"option",23),a(1),y(2,"titlecase"),o()),t&2){let e=i.$implicit;m("value",e),l(),S(k(2,2,e))}}function Yi(t,i){if(t&1&&(r(0,"option",23),a(1),y(2,"titlecase"),o()),t&2){let e=i.$implicit;m("value",e),l(),S(k(2,2,e))}}function Ji(t,i){if(t&1){let e=P();r(0,"button",24),u("click",function(){g(e);let s=d();return f(s.resetFilters())}),a(1," Reset "),o()}}function Ki(t,i){t&1&&(r(0,"div",26),c(1,"div",27)(2,"div",28)(3,"div",29)(4,"div",30)(5,"div",31),o())}function Xi(t,i){t&1&&(Le(0),C(1,Ki,6,0,"div",25),Oe()),t&2&&(l(),m("ngForOf",se(1,Zi)))}function er(t,i){t&1&&(r(0,"div",32)(1,"div",33),b(),r(2,"svg",34),c(3,"path",35)(4,"rect",36)(5,"path",37)(6,"path",38),o()(),F(),r(7,"h3",39),a(8,"No orders found"),o(),r(9,"p",40),a(10,"Try adjusting your filters."),o()())}function tr(t,i){if(t&1&&c(0,"img",84),t&2){let e=d().$implicit,n=d(4);m("src",n.bookCover(e),He)("alt",n.bookTitle(e))}}function ir(t,i){if(t&1&&(r(0,"div",79)(1,"div",80),C(2,tr,1,2,"img",81),o(),r(3,"div",82)(4,"p",83),a(5),o(),r(6,"p",58),a(7),o()()()),t&2){let e=i.$implicit,n=d(4);l(2),m("ngIf",n.bookCover(e)),l(3),w(" ",n.bookTitle(e)," "),l(2),Ae(" Qty ",e.quantity," \xB7 $",e.price.toFixed(2)," ")}}function rr(t,i){if(t&1&&(r(0,"p",85),a(1),o()),t&2){let e=d(2).$implicit;l(),w(" \u{1F4DE} ",e.shipping_details.phone," ")}}function nr(t,i){t&1&&(r(0,"div",58),a(1," No history yet. "),o())}function or(t,i){if(t&1&&(r(0,"span",91),a(1),o()),t&2){let e=d().$implicit;l(),w("\u2014 ",e.note)}}function ar(t,i){if(t&1&&(r(0,"p",92),a(1),y(2,"date"),o()),t&2){let e=d().$implicit;l(),w(" ",$e(2,1,e.changedAt,"MMM d \xB7 h:mm a","+0200")," ")}}function lr(t,i){if(t&1&&(r(0,"div",86),c(1,"div",87),r(2,"div")(3,"span",88),a(4),y(5,"titlecase"),o(),C(6,or,2,1,"span",89)(7,ar,3,5,"p",90),o()()),t&2){let e=i.$implicit;l(4),S(k(5,3,e.status)),l(2),m("ngIf",e.note),l(),m("ngIf",e.changedAt)}}function sr(t,i){if(t&1&&(r(0,"div",69)(1,"div",70)(2,"div")(3,"h4",71),a(4," Books "),o(),r(5,"div",72),C(6,ir,8,4,"div",73),o()(),r(7,"div")(8,"h4",71),a(9," Shipping "),o(),r(10,"div",74)(11,"p",75),a(12),o(),r(13,"p"),a(14),o(),r(15,"p"),a(16),o(),r(17,"p"),a(18),o(),C(19,rr,2,1,"p",76),o()(),r(20,"div")(21,"h4",71),a(22," History "),o(),C(23,nr,2,0,"div",77),r(24,"div",72),C(25,lr,8,5,"div",78),o()()()()),t&2){let e=d().$implicit;l(6),m("ngForOf",e.books),l(6),S(e.shipping_details.fullName),l(2),S(e.shipping_details.street),l(2),Pt(" ",e.shipping_details.city,", ",e.shipping_details.state," ",e.shipping_details.zipCode," "),l(2),S(e.shipping_details.country),l(),m("ngIf",e.shipping_details.phone),l(4),m("ngIf",e.order_history.length===0),l(2),m("ngForOf",e.order_history)}}function dr(t,i){if(t&1){let e=P();r(0,"div",48)(1,"div",49)(2,"div",50)(3,"span",51),a(4),o(),r(5,"p",52),a(6),y(7,"date"),o()(),r(8,"div",50)(9,"p",53),a(10),o(),r(11,"p",54),a(12),o()(),r(13,"div",50)(14,"span",55),a(15),y(16,"titlecase"),o()(),r(17,"div",56)(18,"span",57),a(19),y(20,"titlecase"),o(),r(21,"span",58),a(22),o()(),r(23,"div",59)(24,"span",60),a(25),o(),r(26,"p",58),a(27),o()(),r(28,"div",61)(29,"span",62),a(30),y(31,"date"),o()(),r(32,"div",63)(33,"button",64),u("click",function(){let s=g(e).$implicit,p=d(2);return f(p.toggleExpand(s._id))}),b(),r(34,"svg",65),c(35,"path",66),o()(),F(),r(36,"button",67),u("click",function(){let s=g(e).$implicit,p=d(2);return f(p.openUpdateModal(s))}),a(37," Update "),o()()(),C(38,sr,26,10,"div",68),o()}if(t&2){let e=i.$implicit,n=d(2);l(4),w("#",e._id.slice(-8).toUpperCase()),l(2),w(" ",$e(7,18,e.createdAt,"MMM d, y \xB7 h:mm a","+0200")," "),l(4),S(n.getUserName(e)),l(2),S(n.getUserEmail(e)),l(2),Ve(n.orderStatusClass(e.order_status)),l(),w(" ",k(16,22,e.order_status)," "),l(3),Ve(n.paymentStatusClass(e.payment_status)),l(),w(" ",k(20,24,e.payment_status)," "),l(3),S(n.paymentLabel(e.payment_method)),l(3),w("$",e.total_price.toFixed(2)),l(2),Ae(" ",e.books.length," book",e.books.length!==1?"s":""," "),l(3),S($e(31,26,e.createdAt,"MMM d, y \xB7 h:mm a","+0200")),l(4),Ue("rotate-180",n.expandedOrder===e._id),l(4),m("ngIf",n.expandedOrder===e._id)}}function mr(t,i){if(t&1){let e=P();r(0,"div",93)(1,"button",94),u("click",function(){g(e);let s=d(2);return f(s.loadOrders(s.currentPage-1))}),a(2," Previous "),o(),r(3,"span",95),a(4),o(),r(5,"button",94),u("click",function(){g(e);let s=d(2);return f(s.loadOrders(s.currentPage+1))}),a(6," Next "),o()()}if(t&2){let e=d(2);l(),m("disabled",e.currentPage===1),l(3),Ae("Page ",e.currentPage," of ",e.totalPages),l(),m("disabled",e.currentPage===e.totalPages)}}function cr(t,i){if(t&1&&(r(0,"div",41)(1,"div",42)(2,"div",43),a(3,"Order ID"),o(),r(4,"div",43),a(5,"Customer"),o(),r(6,"div",43),a(7,"Order Status"),o(),r(8,"div",43),a(9,"Payment"),o(),r(10,"div",44),a(11,"Total"),o(),r(12,"div",43),a(13,"Date"),o(),r(14,"div",45),a(15,"Actions"),o()(),C(16,dr,39,30,"div",46)(17,mr,7,4,"div",47),o()),t&2){let e=d();l(16),m("ngForOf",e.orders)("ngForTrackBy",e.trackById),l(),m("ngIf",e.totalPages>1)}}function pr(t,i){if(t&1&&(r(0,"option",23),a(1),y(2,"titlecase"),o()),t&2){let e=i.$implicit;m("value",e),l(),S(k(2,2,e))}}function ur(t,i){t&1&&(r(0,"p",58),a(1," No further transitions available. "),o())}function gr(t,i){if(t&1&&(r(0,"option",23),a(1),y(2,"titlecase"),o()),t&2){let e=i.$implicit;m("value",e),l(),w(" ",k(2,2,e)," ")}}function fr(t,i){t&1&&(r(0,"p",58),a(1," No further payment transitions available. "),o())}function xr(t,i){if(t&1&&(r(0,"p",117),a(1),o()),t&2){let e=d(2);l(),w(" ",e.updateError," ")}}function _r(t,i){if(t&1){let e=P();r(0,"div",96),u("click",function(){g(e);let s=d();return f(s.closeModal())}),c(1,"div",97),r(2,"div",98),u("click",function(s){return g(e),f(s.stopPropagation())}),r(3,"div",99)(4,"div")(5,"h2",100),a(6,"Update Order Status"),o(),r(7,"p",101),a(8),o()(),r(9,"button",102),u("click",function(){g(e);let s=d();return f(s.closeModal())}),b(),r(10,"svg",103),c(11,"path",104),o()()(),F(),r(12,"div",105)(13,"div",106)(14,"span",62),a(15,"Order Status"),o(),r(16,"span",57),a(17),y(18,"titlecase"),o()(),c(19,"div",107),r(20,"div",106)(21,"span",62),a(22,"Payment Status"),o(),r(23,"span",57),a(24),y(25,"titlecase"),o()()(),r(26,"div",108)(27,"label",109),a(28,"New Order Status"),o(),r(29,"select",110),ne("ngModelChange",function(s){g(e);let p=d();return re(p.newOrderStatus,s)||(p.newOrderStatus=s),f(s)}),r(30,"option",12),a(31,"\u2014 No Change \u2014"),o(),C(32,pr,3,4,"option",13),o(),C(33,ur,2,0,"p",77),o(),r(34,"div",108)(35,"label",109),a(36,"New Payment Status"),o(),r(37,"select",110),ne("ngModelChange",function(s){g(e);let p=d();return re(p.newPaymentStatus,s)||(p.newPaymentStatus=s),f(s)}),r(38,"option",12),a(39,"\u2014 No Change \u2014"),o(),C(40,gr,3,4,"option",13),o(),C(41,fr,2,0,"p",77),o(),r(42,"div",108)(43,"label",109),a(44," Note "),r(45,"span",111),a(46,"(optional)"),o()(),r(47,"textarea",112),ne("ngModelChange",function(s){g(e);let p=d();return re(p.statusNote,s)||(p.statusNote=s),f(s)}),o()(),C(48,xr,2,1,"p",113),r(49,"div",114)(50,"button",115),u("click",function(){g(e);let s=d();return f(s.closeModal())}),a(51," Cancel "),o(),r(52,"button",116),u("click",function(){g(e);let s=d();return f(s.submitUpdate())}),a(53),o()()()()}if(t&2){let e,n=d();l(8),w(" #",n.selectedOrder==null||n.selectedOrder._id==null||(e=n.selectedOrder._id.slice(-8))==null?null:e.toUpperCase()," "),l(8),Ve(n.orderStatusClass((n.selectedOrder==null?null:n.selectedOrder.order_status)??"")),l(),w(" ",k(18,19,n.selectedOrder==null?null:n.selectedOrder.order_status)," "),l(6),Ve(n.paymentStatusClass((n.selectedOrder==null?null:n.selectedOrder.payment_status)??"")),l(),w(" ",k(25,21,n.selectedOrder==null?null:n.selectedOrder.payment_status)," "),l(5),ie("ngModel",n.newOrderStatus),m("disabled",n.getAllowedOrderStatuses().length===0),l(3),m("ngForOf",n.getAllowedOrderStatuses()),l(),m("ngIf",n.getAllowedOrderStatuses().length===0),l(4),ie("ngModel",n.newPaymentStatus),m("disabled",n.getAllowedPaymentStatuses().length===0),l(3),m("ngForOf",n.getAllowedPaymentStatuses()),l(),m("ngIf",n.getAllowedPaymentStatuses().length===0),l(6),ie("ngModel",n.statusNote),l(),m("ngIf",n.updateError),l(4),m("disabled",!n.canSubmit()||n.updating),l(),w(" ",n.updating?"Updating...":"Update Order"," ")}}var vr={placed:["processing"],processing:["shipped","cancelled"],shipped:["delivered"],delivered:[],cancelled:[]},hr={pending:["paid","failed"],paid:["refunded"],failed:[],refunded:[]},tt=class t{http=x(ce);API=H.apiUrl;cdr=x(Se);orders=[];loading=!0;currentPage=1;totalPages=1;total=0;limit=10;filterOrderStatus="";filterPaymentStatus="";filterDateFrom="";filterDateTo="";orderStatuses=["placed","processing","shipped","delivered","cancelled"];paymentStatuses=["pending","paid","failed","refunded"];showModal=!1;selectedOrder=null;newOrderStatus="";newPaymentStatus="";statusNote="";updating=!1;updateError="";expandedOrder=null;ngOnInit(){this.loadOrders()}loadOrders(i=1){this.loading=!0;let e={page:i,limit:this.limit};this.filterOrderStatus&&(e.order_status=this.filterOrderStatus),this.filterPaymentStatus&&(e.payment_status=this.filterPaymentStatus),this.filterDateFrom&&(e.from=this.filterDateFrom),this.filterDateTo&&(e.to=this.filterDateTo),this.http.get(`${this.API}/order`,{params:e,headers:{"Cache-Control":"no-cache"}}).pipe(q(()=>this.cdr.detectChanges())).subscribe({next:n=>{this.orders=n.data,this.total=n.pagination?.total??0,this.totalPages=n.pagination?.totalPages??1,this.currentPage=n.pagination?.page??1,this.loading=!1},error:()=>this.loading=!1})}applyFilters(){this.loadOrders(1)}resetFilters(){this.filterOrderStatus="",this.filterPaymentStatus="",this.filterDateFrom="",this.filterDateTo="",this.loadOrders(1)}hasActiveFilters(){return!!(this.filterOrderStatus||this.filterPaymentStatus||this.filterDateFrom||this.filterDateTo)}openUpdateModal(i){this.selectedOrder=i,this.newOrderStatus="",this.newPaymentStatus="",this.statusNote="",this.updateError="",this.showModal=!0,this.cdr.detectChanges()}closeModal(){this.showModal=!1,this.selectedOrder=null}getAllowedOrderStatuses(){return this.selectedOrder?vr[this.selectedOrder.order_status]??[]:[]}getAllowedPaymentStatuses(){return this.selectedOrder?hr[this.selectedOrder.payment_status]??[]:[]}canSubmit(){return!!(this.newOrderStatus||this.newPaymentStatus)}submitUpdate(){if(!this.selectedOrder||!this.canSubmit())return;this.updating=!0,this.updateError="";let i={};this.newOrderStatus&&(i.order_status=this.newOrderStatus),this.newPaymentStatus&&(i.payment_status=this.newPaymentStatus),this.statusNote&&(i.note=this.statusNote),this.http.patch(`${this.API}/order/${this.selectedOrder._id}`,i).pipe(q(()=>this.cdr.detectChanges())).subscribe({next:e=>{let n=this.orders.findIndex(s=>s._id===this.selectedOrder._id);n!==-1&&(this.orders[n]=e.data.order),this.updating=!1,this.closeModal()},error:e=>{this.updateError=e.error?.message??"Failed to update order.",this.updating=!1}})}toggleExpand(i){this.expandedOrder=this.expandedOrder===i?null:i}getUserName(i){return typeof i.user_id=="object"?`${i.user_id.firstname} ${i.user_id.lastname}`:"Unknown User"}getUserEmail(i){return typeof i.user_id=="object"?i.user_id.email:""}bookTitle(i){return typeof i.book_id=="object"?i.book_id.book_title:i.name}bookCover(i){return typeof i.book_id=="object"?i.book_id.book_cover_url??"":""}orderStatusClass(i){return{placed:"bg-amber-100 text-amber-700 border border-amber-200",processing:"bg-blue-100 text-blue-700 border border-blue-200",shipped:"bg-purple-100 text-purple-700 border border-purple-200",delivered:"bg-emerald-100 text-emerald-700 border border-emerald-200",cancelled:"bg-red-100 text-red-700 border border-red-200"}[i]??"bg-gray-100 text-gray-600"}paymentStatusClass(i){return{pending:"bg-amber-100 text-amber-700 border border-amber-200",paid:"bg-emerald-100 text-emerald-700 border border-emerald-200",failed:"bg-red-100 text-red-700 border border-red-200",refunded:"bg-gray-100 text-gray-600 border border-gray-200"}[i]??"bg-gray-100 text-gray-600"}paymentLabel(i){return i==="cash_on_delivery"?"Cash on Delivery":"Card"}trackById(i,e){return e._id}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=E({type:t,selectors:[["app-orders-page"]],decls:42,vars:13,consts:[[1,"min-h-screen","bg-gray-50"],[1,"bg-white","border-b","border-gray-100"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8","py-8"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-sm","text-gray-500","mt-1"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8","py-8","flex","flex-col","gap-6"],[1,"bg-white","rounded-2xl","shadow-sm","p-5"],[1,"flex","flex-wrap","gap-4","items-end"],[1,"flex","flex-col","gap-1.5","min-w-[160px]"],[1,"text-xs","font-semibold","text-gray-500","uppercase","tracking-wider"],[1,"px-3","py-2.5","rounded-xl","border","border-gray-200","text-sm","outline-none","focus:border-primary","transition-colors","bg-white","cursor-pointer",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"flex","flex-col","gap-1.5","min-w-[150px]"],["type","date",1,"px-3","py-2.5","rounded-xl","border","border-gray-200","text-sm","outline-none","focus:border-primary","transition-colors",3,"ngModelChange","ngModel"],[1,"flex","gap-2","pb-0.5"],[1,"px-5","py-2.5","text-sm","font-semibold","text-white","bg-primary","rounded-xl","hover:bg-primaryHover","transition-all","border-none","cursor-pointer",3,"click"],["class","px-5 py-2.5 text-sm font-semibold text-gray-600 bg-gray-100 rounded-xl hover:bg-gray-200 transition-all border-none cursor-pointer",3,"click",4,"ngIf"],[4,"ngIf"],["class","flex flex-col items-center justify-center py-24 gap-4 text-center bg-white rounded-2xl",4,"ngIf"],["class","flex flex-col gap-3",4,"ngIf"],["class","fixed inset-0 z-50 flex items-center justify-center p-4",3,"click",4,"ngIf"],[3,"value"],[1,"px-5","py-2.5","text-sm","font-semibold","text-gray-600","bg-gray-100","rounded-xl","hover:bg-gray-200","transition-all","border-none","cursor-pointer",3,"click"],["class","bg-white rounded-2xl p-5 animate-pulse flex gap-4 items-center",4,"ngFor","ngForOf"],[1,"bg-white","rounded-2xl","p-5","animate-pulse","flex","gap-4","items-center"],[1,"h-4","bg-gray-200","rounded","w-28"],[1,"h-6","bg-gray-100","rounded-full","w-20"],[1,"h-6","bg-gray-100","rounded-full","w-16"],[1,"flex-1","h-4","bg-gray-100","rounded"],[1,"h-8","bg-gray-200","rounded-xl","w-24"],[1,"flex","flex-col","items-center","justify-center","py-24","gap-4","text-center","bg-white","rounded-2xl"],[1,"w-20","h-20","rounded-full","bg-primary/10","flex","items-center","justify-center"],["width","36","height","36","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5",1,"text-primary"],["d","M9 5H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2"],["x","9","y","3","width","6","height","4","rx","2"],["d","M9 12h6"],["d","M9 16h4"],[1,"text-xl","font-semibold","text-gray-800"],[1,"text-gray-500","text-sm"],[1,"flex","flex-col","gap-3"],[1,"hidden","lg:grid","grid-cols-12","gap-4","px-5","py-3","text-xs","font-semibold","text-gray-400","uppercase","tracking-wider"],[1,"col-span-2"],[1,"col-span-1"],[1,"col-span-1","text-right"],["class","bg-white rounded-2xl shadow-sm hover:shadow-md transition-shadow overflow-hidden",4,"ngFor","ngForOf","ngForTrackBy"],["class","flex items-center justify-center gap-2 pt-4",4,"ngIf"],[1,"bg-white","rounded-2xl","shadow-sm","hover:shadow-md","transition-shadow","overflow-hidden"],[1,"grid","grid-cols-2","lg:grid-cols-12","gap-4","px-5","py-4","items-center"],[1,"col-span-1","lg:col-span-2"],[1,"font-mono","text-sm","font-bold","text-gray-900"],[1,"text-xs","text-gray-400","mt-0.5","lg:hidden"],[1,"text-sm","font-semibold","text-gray-800","truncate"],[1,"text-xs","text-gray-400","truncate"],[1,"px-2.5","py-1","rounded-full","text-xs","font-semibold"],[1,"col-span-1","lg:col-span-2","flex","flex-col","gap-1"],[1,"px-2.5","py-1","rounded-full","text-xs","font-semibold","w-fit"],[1,"text-xs","text-gray-400"],[1,"col-span-1","lg:col-span-1"],[1,"text-sm","font-bold","text-gray-900"],[1,"hidden","lg:block","col-span-2"],[1,"text-xs","text-gray-500"],[1,"col-span-2","lg:col-span-1","flex","items-center","justify-end","gap-2"],[1,"w-8","h-8","rounded-xl","flex","items-center","justify-center","text-gray-400","hover:text-primary","hover:bg-primary/10","transition-all","border-none","bg-transparent","cursor-pointer",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"transition-transform","duration-200"],["d","M6 9l6 6 6-6"],[1,"px-3","py-1.5","text-xs","font-semibold","bg-primary","text-white","rounded-xl","hover:bg-primaryHover","transition-all","border-none","cursor-pointer",3,"click"],["class","border-t border-gray-50 px-5 py-5 bg-gray-50/50",4,"ngIf"],[1,"border-t","border-gray-50","px-5","py-5","bg-gray-50/50"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"text-xs","font-semibold","text-gray-500","uppercase","tracking-wider","mb-3"],[1,"flex","flex-col","gap-2"],["class","flex gap-3 items-center",4,"ngFor","ngForOf"],[1,"text-sm","text-gray-600","flex","flex-col","gap-0.5"],[1,"font-semibold","text-gray-800"],["class","mt-1",4,"ngIf"],["class","text-xs text-gray-400",4,"ngIf"],["class","flex items-start gap-2 text-xs",4,"ngFor","ngForOf"],[1,"flex","gap-3","items-center"],[1,"w-9","h-12","rounded-lg","bg-gray-200","flex-shrink-0","overflow-hidden"],["class","w-full h-full object-cover",3,"src","alt",4,"ngIf"],[1,"flex-1","min-w-0"],[1,"text-xs","font-semibold","text-gray-800","truncate"],[1,"w-full","h-full","object-cover",3,"src","alt"],[1,"mt-1"],[1,"flex","items-start","gap-2","text-xs"],[1,"w-1.5","h-1.5","rounded-full","bg-primary","mt-1.5","flex-shrink-0"],[1,"font-semibold","text-gray-700"],["class","text-gray-400 ml-1",4,"ngIf"],["class","text-gray-400",4,"ngIf"],[1,"text-gray-400","ml-1"],[1,"text-gray-400"],[1,"flex","items-center","justify-center","gap-2","pt-4"],[1,"px-4","py-2","text-sm","font-medium","rounded-xl","border","border-gray-200","hover:bg-gray-50","transition-all","bg-transparent","cursor-pointer","disabled:opacity-40","disabled:cursor-not-allowed",3,"click","disabled"],[1,"text-sm","text-gray-500","px-2"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","p-4",3,"click"],[1,"absolute","inset-0","bg-black/40","backdrop-blur-sm"],[1,"relative","bg-white","rounded-2xl","shadow-2xl","w-full","max-w-md","p-6","flex","flex-col","gap-5",3,"click"],[1,"flex","items-start","justify-between"],[1,"text-lg","font-bold","text-gray-900"],[1,"text-xs","text-gray-400","mt-0.5","font-mono"],[1,"w-8","h-8","rounded-xl","flex","items-center","justify-center","text-gray-400","hover:text-gray-600","hover:bg-gray-100","transition-all","border-none","bg-transparent","cursor-pointer",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5"],["d","M18 6L6 18M6 6l12 12"],[1,"flex","gap-3","p-3","bg-gray-50","rounded-xl"],[1,"flex","flex-col","gap-1"],[1,"w-px","bg-gray-200"],[1,"flex","flex-col","gap-1.5"],[1,"text-xs","font-semibold","text-gray-700","uppercase","tracking-wider"],[1,"px-4","py-3","rounded-xl","border","border-gray-200","text-sm","outline-none","focus:border-primary","transition-colors","bg-white","cursor-pointer","disabled:opacity-50",3,"ngModelChange","ngModel","disabled"],[1,"text-gray-400","normal-case","font-normal"],["rows","2","placeholder","Add a note about this status change...",1,"px-4","py-3","rounded-xl","border","border-gray-200","text-sm","outline-none","focus:border-primary","transition-colors","resize-none",3,"ngModelChange","ngModel"],["class","text-xs text-red-500 bg-red-50 px-3 py-2 rounded-xl",4,"ngIf"],[1,"flex","gap-3"],[1,"flex-1","py-3","text-sm","font-semibold","text-gray-600","bg-gray-100","rounded-xl","hover:bg-gray-200","transition-all","border-none","cursor-pointer",3,"click"],[1,"flex-1","py-3","text-sm","font-semibold","text-white","bg-primary","rounded-xl","hover:bg-primaryHover","transition-all","border-none","cursor-pointer","disabled:opacity-40","disabled:cursor-not-allowed",3,"click","disabled"],[1,"text-xs","text-red-500","bg-red-50","px-3","py-2","rounded-xl"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"h1",4),a(6,"Order Management"),o(),r(7,"p",5),a(8),o()()()()(),r(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"label",10),a(14,"Order Status"),o(),r(15,"select",11),ne("ngModelChange",function(p){return re(n.filterOrderStatus,p)||(n.filterOrderStatus=p),p}),r(16,"option",12),a(17,"All Statuses"),o(),C(18,Qi,3,4,"option",13),o()(),r(19,"div",9)(20,"label",10),a(21,"Payment Status"),o(),r(22,"select",11),ne("ngModelChange",function(p){return re(n.filterPaymentStatus,p)||(n.filterPaymentStatus=p),p}),r(23,"option",12),a(24,"All Payments"),o(),C(25,Yi,3,4,"option",13),o()(),r(26,"div",14)(27,"label",10),a(28,"From Date"),o(),r(29,"input",15),ne("ngModelChange",function(p){return re(n.filterDateFrom,p)||(n.filterDateFrom=p),p}),o()(),r(30,"div",14)(31,"label",10),a(32,"To Date"),o(),r(33,"input",15),ne("ngModelChange",function(p){return re(n.filterDateTo,p)||(n.filterDateTo=p),p}),o()(),r(34,"div",16)(35,"button",17),u("click",function(){return n.applyFilters()}),a(36," Apply "),o(),C(37,Ji,2,0,"button",18),o()()(),C(38,Xi,2,2,"ng-container",19)(39,er,11,0,"div",20)(40,cr,18,3,"div",21),o()(),C(41,_r,54,23,"div",22)),e&2&&(l(8),Ae(" ",n.total," total order",n.total!==1?"s":""," "),l(7),ie("ngModel",n.filterOrderStatus),l(3),m("ngForOf",n.orderStatuses),l(4),ie("ngModel",n.filterPaymentStatus),l(3),m("ngForOf",n.paymentStatuses),l(4),ie("ngModel",n.filterDateFrom),l(4),ie("ngModel",n.filterDateTo),l(4),m("ngIf",n.hasActiveFilters()),l(),m("ngIf",n.loading),l(),m("ngIf",!n.loading&&n.orders.length===0),l(),m("ngIf",!n.loading&&n.orders.length>0),l(),m("ngIf",n.showModal))},dependencies:[R,ke,de,Pe,jt,Ht,U,Rt,$,Ze,It,Ee],encapsulation:2})};var it=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=E({type:t,selectors:[["app-authors"]],decls:2,vars:0,template:function(e,n){e&1&&(I(0,"p"),a(1,"authors works!"),T())},encapsulation:2})};var rt=class t{constructor(i){this.http=i}apiUrl=`${H.apiUrl}/categories`;getCategories(i=1,e=10){let n=new Ge().set("page",i.toString()).set("limit",e.toString());return this.http.get(this.apiUrl,{params:n})}createCategory(i){return this.http.post(this.apiUrl,{name:i})}updateCategory(i,e){return this.http.put(`${this.apiUrl}/${i}`,{name:e})}deleteCategory(i){return this.http.delete(`${this.apiUrl}/${i}`)}static \u0275fac=function(e){return new(e||t)(Ct(ce))};static \u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"root"})};function yr(t,i){if(t&1){let e=P();r(0,"div",27)(1,"div",28),b(),r(2,"svg",29),c(3,"path",30),o(),a(4),o(),F(),r(5,"button",31),u("click",function(){g(e);let s=d();return f(s.successMessage="")}),b(),r(6,"svg",32),c(7,"path",33),o()()()}if(t&2){let e=d();l(4),w(" ",e.successMessage," ")}}function wr(t,i){if(t&1){let e=P();r(0,"div",34)(1,"div",28),b(),r(2,"svg",35),c(3,"path",36),o(),a(4),o(),F(),r(5,"button",37),u("click",function(){g(e);let s=d();return f(s.error="")}),b(),r(6,"svg",32),c(7,"path",33),o()()()}if(t&2){let e=d();l(4),w(" ",e.error," ")}}function Cr(t,i){if(t&1){let e=P();r(0,"button",38),u("click",function(){g(e);let s=d();return f(s.cancelEdit())}),a(1," Cancel "),o()}}function Sr(t,i){t&1&&(r(0,"div",39),b(),r(1,"svg",40),c(2,"circle",41)(3,"path",42),o()())}function kr(t,i){t&1&&(r(0,"div",43),b(),r(1,"svg",44),c(2,"path",45),o(),F(),r(3,"p",46),a(4,"No categories found."),o(),r(5,"p",47),a(6,"Add a new category using the form to get started."),o()())}function Er(t,i){if(t&1){let e=P();r(0,"tr",55)(1,"td",56)(2,"div",57),a(3),o(),r(4,"div",58),a(5),y(6,"date"),o()(),r(7,"td",59),a(8),y(9,"date"),o(),r(10,"td",60)(11,"div",61)(12,"button",62),u("click",function(){let s=g(e).$implicit,p=d(2);return f(p.editCategory(s))}),b(),r(13,"svg",63),c(14,"path",64),o()(),F(),r(15,"button",65),u("click",function(){let s=g(e).$implicit,p=d(2);return f(p.deleteCategory(s._id))}),b(),r(16,"svg",63),c(17,"path",66),o()()()()()}if(t&2){let e=i.$implicit;l(3),S(e.name),l(2),S(Ce(6,3,e.createdAt,"mediumDate")),l(3),w(" ",Ce(9,6,e.createdAt,"mediumDate")," ")}}function Pr(t,i){if(t&1&&(r(0,"div",48)(1,"table",49)(2,"thead")(3,"tr",50)(4,"th",51),a(5," Category Name"),o(),r(6,"th",51),a(7,"Date Added"),o(),r(8,"th",52),a(9," Actions"),o()()(),r(10,"tbody",53),C(11,Er,18,9,"tr",54),o()()()),t&2){let e=d();l(11),m("ngForOf",e.categories)}}function Mr(t,i){if(t&1){let e=P();r(0,"div",67)(1,"div",68),a(2," Showing page "),r(3,"span",69),a(4),o(),a(5," of "),r(6,"span",69),a(7),o()(),r(8,"button",70),u("click",function(){g(e);let s=d();return f(s.changePage(s.currentPage-1))}),a(9," Previous "),o(),r(10,"button",70),u("click",function(){g(e);let s=d();return f(s.changePage(s.currentPage+1))}),a(11," Next "),o()()}if(t&2){let e=d();l(4),S(e.currentPage),l(3),S(e.totalPages),l(),m("disabled",e.currentPage===1),l(2),m("disabled",e.currentPage===e.totalPages)}}function Tr(t,i){if(t&1){let e=P();r(0,"div",71)(1,"div",72)(2,"div",73),b(),r(3,"svg",74),c(4,"path",75),o()(),F(),r(5,"div",76)(6,"h3",77),a(7,"Delete Category"),o(),r(8,"p",68),a(9," Are you sure you want to delete this category? "),o()(),r(10,"div",78)(11,"button",79),u("click",function(){g(e);let s=d();return f(s.cancelDelete())}),a(12," Cancel "),o(),r(13,"button",80),u("click",function(){g(e);let s=d();return f(s.confirmDelete())}),a(14," Delete Permanently "),o()()()()}}var nt=class t{constructor(i,e){this.categoryService=i;this.cdr=e}categories=[];isLoading=!1;error="";successMessage="";currentPage=1;totalPages=1;totalItems=0;itemsPerPage=10;isEditing=!1;currentCategoryId="";categoryForm={name:""};showDeleteModal=!1;categoryToDelete=null;ngOnInit(){this.loadCategories()}loadCategories(i=1){this.isLoading=!0,this.error="",this.categoryService.getCategories(i,this.itemsPerPage).subscribe({next:e=>{this.categories=Array.isArray(e.data)?e.data:[e.data],e.pagination&&(this.currentPage=e.pagination.page,this.totalPages=e.pagination.totalPages,this.totalItems=e.pagination.total),this.isLoading=!1,this.cdr.detectChanges()},error:e=>{this.error="can not load categories. Please try again.",this.isLoading=!1,console.error("Error loading categories:",e),this.cdr.detectChanges()}})}saveCategory(){let i=this.categoryForm.name.trim();if(!i){this.error="Category name is required";return}if(i.length<2){this.error="Category name must be at least 2 characters";return}this.isLoading=!0,this.error="",this.successMessage="",this.isEditing?this.categoryService.updateCategory(this.currentCategoryId,this.categoryForm.name).subscribe({next:e=>{this.successMessage="Category updated successfully",this.resetForm(),this.loadCategories(this.currentPage),this.cdr.detectChanges()},error:e=>{this.error=e.error?.details||e.error?.message||"Failed to update category",this.isLoading=!1,this.cdr.detectChanges()}}):this.categoryService.createCategory(this.categoryForm.name).subscribe({next:e=>{this.successMessage="Category created successfully",this.resetForm(),this.loadCategories(1),this.cdr.detectChanges()},error:e=>{this.error=e.error?.details||e.error?.message||"Failed to create category",this.isLoading=!1,this.cdr.detectChanges()}})}editCategory(i){this.isEditing=!0,this.currentCategoryId=i._id,this.categoryForm.name=i.name,this.error="",this.successMessage="",window.scrollTo({top:0,behavior:"smooth"})}deleteCategory(i){this.categoryToDelete=i,this.showDeleteModal=!0}confirmDelete(){this.categoryToDelete&&(this.isLoading=!0,this.error="",this.successMessage="",this.showDeleteModal=!1,this.categoryService.deleteCategory(this.categoryToDelete).subscribe({next:()=>{this.successMessage="Category deleted successfully",this.categoryToDelete=null,this.categories.length===1&&this.currentPage>1?this.loadCategories(this.currentPage-1):this.loadCategories(this.currentPage),this.cdr.detectChanges()},error:i=>{this.error="It might be in use.",this.isLoading=!1,this.categoryToDelete=null,this.cdr.detectChanges()}}))}cancelDelete(){this.showDeleteModal=!1,this.categoryToDelete=null}cancelEdit(){this.resetForm()}resetForm(){this.isEditing=!1,this.currentCategoryId="",this.categoryForm={name:""},setTimeout(()=>{this.successMessage="",this.error=""},5e3)}changePage(i){i>=1&&i<=this.totalPages&&this.loadCategories(i)}static \u0275fac=function(e){return new(e||t)(Ie(rt),Ie(Se))};static \u0275cmp=E({type:t,selectors:[["app-categories"]],decls:35,vars:13,consts:[[1,"px-4","sm:px-6","lg:px-8","py-8","w-full","max-w-9xl","mx-auto"],[1,"sm:flex","sm:justify-between","sm:items-center","mb-8"],[1,"mb-4","sm:mb-0"],[1,"text-2xl","md:text-3xl","text-textMain","font-bold"],["class","mb-4 p-4 rounded-lg bg-green-50 border border-green-200 text-green-700 flex items-center justify-between shadow-sm",4,"ngIf"],["class","mb-4 p-4 rounded-lg bg-red-50 border border-red-200 text-red-700 flex items-center justify-between shadow-sm",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"col-span-1"],[1,"bg-card","shadow-sm","rounded-xl","border","border-gray-100","p-6","sticky","top-6"],[1,"text-lg","font-bold","text-textMain","mb-4"],[1,"space-y-4",3,"ngSubmit"],["for","name",1,"block","text-sm","font-medium","text-textSub","mb-1"],[1,"text-red-500"],["type","text","id","name","name","name","placeholder","e.g. Science Fiction","required","","minlength","2",1,"w-full","border","border-gray-200","rounded-lg","p-3","text-sm","text-textMain","focus:outline-none","focus:border-primary","focus:ring-1","focus:ring-primary","transition-colors",3,"ngModelChange","ngModel"],[1,"flex","gap-3","pt-2"],["type","submit",1,"flex-1","bg-primary","text-white","py-2.5","rounded-lg","font-medium","shadow-sm","hover:bg-primaryHover","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],["type","button","class","px-4 py-2.5 bg-gray-100 text-textSub hover:bg-gray-200 rounded-lg font-medium transition-colors",3,"click",4,"ngIf"],[1,"col-span-1","md:col-span-2"],[1,"bg-card","shadow-sm","rounded-xl","border","border-gray-100","overflow-hidden"],[1,"px-6","py-4","border-b","border-gray-100","flex","justify-between","items-center","bg-gray-50/50"],[1,"font-bold","text-textMain"],[1,"text-xs","font-semibold","bg-primary/10","text-primary","px-3","py-1","rounded-full"],["class","p-12 flex justify-center items-center text-primary",4,"ngIf"],["class","p-12 text-center text-textSub",4,"ngIf"],["class","overflow-x-auto",4,"ngIf"],["class","px-6 py-4 border-t border-gray-100 flex items-center justify-between bg-white",4,"ngIf"],["class","fixed inset-0 z-50 flex items-center justify-center overflow-auto bg-black bg-opacity-40 backdrop-blur-sm transition-opacity",4,"ngIf"],[1,"mb-4","p-4","rounded-lg","bg-green-50","border","border-green-200","text-green-700","flex","items-center","justify-between","shadow-sm"],[1,"flex","items-center"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","mr-3","text-green-500"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],[1,"text-green-500","hover:text-green-600","focus:outline-none",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"mb-4","p-4","rounded-lg","bg-red-50","border","border-red-200","text-red-700","flex","items-center","justify-between","shadow-sm"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","mr-3","text-red-500"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule","evenodd"],[1,"text-red-500","hover:text-red-600","focus:outline-none",3,"click"],["type","button",1,"px-4","py-2.5","bg-gray-100","text-textSub","hover:bg-gray-200","rounded-lg","font-medium","transition-colors",3,"click"],[1,"p-12","flex","justify-center","items-center","text-primary"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-8","w-8"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"p-12","text-center","text-textSub"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"mx-auto","h-12","w-12","text-gray-300","mb-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 002-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"],[1,"text-sm"],[1,"text-xs","mt-1"],[1,"overflow-x-auto"],[1,"w-full","text-left","border-collapse"],[1,"bg-gray-50","border-b","border-gray-100"],[1,"px-6","py-4","text-xs","font-semibold","text-textSub","uppercase","tracking-wider"],[1,"px-6","py-4","text-xs","font-semibold","text-textSub","uppercase","tracking-wider","text-right"],[1,"divide-y","divide-gray-100"],["class","hover:bg-gray-50/50 transition-colors group",4,"ngFor","ngForOf"],[1,"hover:bg-gray-50/50","transition-colors","group"],[1,"px-6","py-4","whitespace-nowrap"],[1,"font-medium","text-textMain"],[1,"text-xs","text-textSub","mt-1","xl:hidden"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-textSub","hidden","xl:table-cell"],[1,"px-6","py-4","whitespace-nowrap","text-right","text-sm","font-medium"],[1,"flex","items-center","justify-end","gap-3","opacity-0","group-hover:opacity-100","focus-within:opacity-100","transition-opacity"],["title","Edit Category",1,"text-primary","hover:text-primaryHover","focus:outline-none","transition-colors","px-2","py-1","rounded","hover:bg-primary/10",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","2","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","d","M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"],["title","Delete Category",1,"text-red-500","hover:text-red-600","focus:outline-none","transition-colors","px-2","py-1","rounded","hover:bg-red-50",3,"click"],["stroke-linecap","round","stroke-linejoin","round","d","M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"],[1,"px-6","py-4","border-t","border-gray-100","flex","items-center","justify-between","bg-white"],[1,"text-sm","text-textSub"],[1,"font-semibold","text-textMain"],[1,"px-3","py-1.5","border","border-gray-200","rounded-md","text-sm","font-medium","text-textMain","bg-white","hover:bg-gray-50","focus:outline-none","disabled:opacity-50","disabled:cursor-not-allowed","transition-colors",3,"click","disabled"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","overflow-auto","bg-black","bg-opacity-40","backdrop-blur-sm","transition-opacity"],[1,"relative","bg-white","rounded-xl","shadow-2xl","w-full","max-w-md","m-4","p-6","sm:p-8","transform","transition-transform"],[1,"mx-auto","flex","h-16","w-16","items-center","justify-center","rounded-full","bg-red-100","mb-6"],["fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"h-10","w-10","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"text-center"],[1,"text-xl","font-bold","text-textMain","mb-2"],[1,"mt-8","flex","flex-col","sm:flex-row","gap-3"],[1,"flex-1","rounded-lg","bg-gray-100","px-4","py-3","text-sm","font-semibold","text-textMain","hover:bg-gray-200","transition-colors","focus:outline-none",3,"click"],[1,"flex-1","rounded-lg","bg-red-600","px-4","py-3","text-sm","font-semibold","text-white","shadow-sm","hover:bg-red-500","transition-colors","focus:outline-none",3,"click"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),a(4,"Categories"),o()()(),C(5,yr,8,1,"div",4)(6,wr,8,1,"div",5),r(7,"div",6)(8,"div",7)(9,"div",8)(10,"h2",9),a(11),o(),r(12,"form",10),u("ngSubmit",function(){return n.saveCategory()}),r(13,"div")(14,"label",11),a(15,"Category Name "),r(16,"span",12),a(17,"*"),o()(),r(18,"input",13),ne("ngModelChange",function(p){return re(n.categoryForm.name,p)||(n.categoryForm.name=p),p}),o()(),r(19,"div",14)(20,"button",15),a(21),o(),C(22,Cr,2,0,"button",16),o()()()(),r(23,"div",17)(24,"div",18)(25,"div",19)(26,"h2",20),a(27,"All Categories"),o(),r(28,"span",21),a(29),o()(),C(30,Sr,4,0,"div",22)(31,kr,7,0,"div",23)(32,Pr,12,1,"div",24)(33,Mr,12,4,"div",25),o()()()(),C(34,Tr,15,0,"div",26)),e&2&&(l(5),m("ngIf",n.successMessage),l(),m("ngIf",n.error),l(5),w(" ",n.isEditing?"Edit Category":"Add New Category"," "),l(7),ie("ngModel",n.categoryForm.name),l(2),m("disabled",n.isLoading||n.categoryForm.name.trim().length<2),l(),w(" ",n.isLoading?"Saving...":n.isEditing?"Update Category":"Create Category"," "),l(),m("ngIf",n.isEditing),l(7),w("",n.totalItems," Total Categories"),l(),m("ngIf",n.isLoading&&n.categories.length===0),l(),m("ngIf",!n.isLoading&&n.categories.length===0),l(),m("ngIf",n.categories.length>0),l(),m("ngIf",n.totalPages>1),l(),m("ngIf",n.showDeleteModal))},dependencies:[R,ke,de,Pe,Y,U,$,Q,Ut,$t,Ze,Bt,Ee],encapsulation:2})};var ot=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=E({type:t,selectors:[["app-books"]],decls:2,vars:0,template:function(e,n){e&1&&(I(0,"p"),a(1,"books works!"),T())},encapsulation:2})};var Gt=(t,i)=>{let e=x(M),n=x(j);return e.user$.pipe(ye(1),z(s=>s?.role=="admin"),W(s=>{s||n.navigateByUrl("")}))};function Fe(t,i){let n=!i?.manualCleanup?i?.injector?.get(vt)??x(vt):null,s=Fr(i?.equal),p;i?.requireSync?p=L({kind:0},{equal:s}):p=L({kind:1,value:i?.initialValue},{equal:s});let N,ae=t.subscribe({next:G=>p.set({kind:1,value:G}),error:G=>{p.set({kind:2,error:G}),N?.()},complete:()=>{N?.()}});if(i?.requireSync&&p().kind===0)throw new _t(601,!1);return N=n?.onDestroy(ae.unsubscribe.bind(ae)),Tt(()=>{let G=p();switch(G.kind){case 1:return G.value;case 2:throw G.error;case 0:throw new _t(601,!1)}},{equal:i?.equal})}function Fr(t=Object.is){return(i,e)=>i.kind===1&&e.kind===1&&t(i.value,e.value)}var ue=(t,i)=>i.key;function Ir(t,i){if(t&1){let e=P();r(0,"div",5)(1,"button",15),u("click",function(){g(e);let s=d();return f(s.saveProfile())}),a(2,"Save"),o(),r(3,"button",16),u("click",function(){g(e);let s=d();return f(s.cancelEditMode())}),a(4,"Cancel"),o()()}}function Lr(t,i){if(t&1){let e=P();r(0,"button",16),u("click",function(){g(e);let s=d();return f(s.enableEditMode())}),a(1,"Edit"),o()}}function Or(t,i){if(t&1&&(r(0,"small",19),a(1),o()),t&2){let e=i.$implicit,n=d(2);l(),S(n.getErrorMessage(e.key,e.value))}}function Vr(t,i){if(t&1&&(c(0,"input",17),r(1,"div",18),O(2,Or,2,1,"small",19,ue),y(4,"keyvalue"),o()),t&2){let e,n,s=d();m("value",(e=s.user())==null?null:e.firstname),l(2),V(k(4,1,(n=s.editForm.get("firstname"))==null?null:n.errors))}}function Ar(t,i){if(t&1&&a(0),t&2){let e,n=d();w(" ",(e=n.user())==null?null:e.firstname," ")}}function Dr(t,i){if(t&1&&(r(0,"small",19),a(1),o()),t&2){let e=i.$implicit,n=d(2);l(),S(n.getErrorMessage(e.key,e.value))}}function Nr(t,i){if(t&1&&(c(0,"input",20),r(1,"div",18),O(2,Dr,2,1,"small",19,ue),y(4,"keyvalue"),o()),t&2){let e,n,s=d();m("value",(e=s.user())==null?null:e.lastname),l(2),V(k(4,1,(n=s.editForm.get("lastname"))==null?null:n.errors))}}function Br(t,i){if(t&1&&a(0),t&2){let e,n=d();w(" ",(e=n.user())==null?null:e.lastname," ")}}function Rr(t,i){if(t&1&&(r(0,"small",19),a(1),o()),t&2){let e=i.$implicit,n=d(2);l(),S(n.getErrorMessage(e.key,e.value))}}function jr(t,i){if(t&1&&(c(0,"input",21),y(1,"date"),r(2,"div",18),O(3,Rr,2,1,"small",19,ue),y(5,"keyvalue"),o()),t&2){let e,n,s=d();m("value",Ce(1,1,(e=s.user())==null?null:e.dob,"MM/dd/yyyy")),l(3),V(k(5,4,(n=s.editForm.get("dob"))==null?null:n.errors))}}function Hr(t,i){if(t&1&&(a(0),y(1,"date")),t&2){let e,n=d();w(" ",Ce(1,1,(e=n.user())==null?null:e.dob,"MM/dd/yyyy")," ")}}function Ur(t,i){if(t&1&&(r(0,"small",19),a(1),o()),t&2){let e=i.$implicit,n=d(2);l(),S(n.getErrorMessage(e.key,e.value))}}function $r(t,i){if(t&1&&(c(0,"input",22),r(1,"div",18),O(2,Ur,2,1,"small",19,ue),y(4,"keyvalue"),o()),t&2){let e,n,s=d();m("value",(e=s.user())==null||e.address==null?null:e.address.street),l(2),V(k(4,1,(n=s.editForm.get("address_street"))==null?null:n.errors))}}function qr(t,i){if(t&1&&a(0),t&2){let e,n=d();w(" ",(e=n.user())==null||e.address==null?null:e.address.street," ")}}function Gr(t,i){if(t&1&&(r(0,"small",19),a(1),o()),t&2){let e=i.$implicit,n=d(2);l(),S(n.getErrorMessage(e.key,e.value))}}function zr(t,i){if(t&1&&(c(0,"input",23),r(1,"div",18),O(2,Gr,2,1,"small",19,ue),y(4,"keyvalue"),o()),t&2){let e,n,s=d();m("value",(e=s.user())==null||e.address==null?null:e.address.city),l(2),V(k(4,1,(n=s.editForm.get("address_city"))==null?null:n.errors))}}function Wr(t,i){if(t&1&&a(0),t&2){let e,n=d();w(" ",(e=n.user())==null||e.address==null?null:e.address.city," ")}}function Zr(t,i){if(t&1&&(r(0,"small",19),a(1),o()),t&2){let e=i.$implicit,n=d(2);l(),S(n.getErrorMessage(e.key,e.value))}}function Qr(t,i){if(t&1&&(c(0,"input",24),r(1,"div",18),O(2,Zr,2,1,"small",19,ue),y(4,"keyvalue"),o()),t&2){let e,n,s=d();m("value",(e=s.user())==null||e.address==null?null:e.address.state),l(2),V(k(4,1,(n=s.editForm.get("address_state"))==null?null:n.errors))}}function Yr(t,i){if(t&1&&a(0),t&2){let e,n=d();w(" ",(e=n.user())==null||e.address==null?null:e.address.state," ")}}function Jr(t,i){if(t&1&&(r(0,"small",19),a(1),o()),t&2){let e=i.$implicit,n=d(2);l(),S(n.getErrorMessage(e.key,e.value))}}function Kr(t,i){if(t&1&&(c(0,"input",25),r(1,"div",18),O(2,Jr,2,1,"small",19,ue),y(4,"keyvalue"),o()),t&2){let e,n,s=d();m("value",(e=s.user())==null||e.address==null?null:e.address.country),l(2),V(k(4,1,(n=s.editForm.get("address_country"))==null?null:n.errors))}}function Xr(t,i){if(t&1&&a(0),t&2){let e,n=d();w(" ",(e=n.user())==null||e.address==null?null:e.address.country," ")}}function en(t,i){if(t&1&&(r(0,"small",19),a(1),o()),t&2){let e=i.$implicit,n=d(2);l(),S(n.getErrorMessage(e.key,e.value))}}function tn(t,i){if(t&1&&(c(0,"input",26),r(1,"div",18),O(2,en,2,1,"small",19,ue),y(4,"keyvalue"),o()),t&2){let e,n,s=d();m("value",(e=s.user())==null||e.address==null?null:e.address.zipCode),l(2),V(k(4,1,(n=s.editForm.get("address_zip_code"))==null?null:n.errors))}}function rn(t,i){if(t&1&&a(0),t&2){let e,n=d();w(" ",(e=n.user())==null||e.address==null?null:e.address.zipCode," ")}}var nn=t=>{let i=new Date(t.value),e=new Date;return e.setHours(0,0,0),t.value&&i>e?{futureDate:!0}:null},at=class t{authService=x(M);fb=x(ee);serverErrorMessages={};user=Fe(this.authService.user$);pending=L(!1);editForm=this.fb.group({firstname:[this.user()?.firstname,[h.required,h.minLength(2),h.maxLength(50)]],lastname:[this.user()?.lastname,[h.required,h.minLength(2),h.maxLength(50)]],dob:[this.user()?.dob,[h.required,nn]],address_street:[this.user()?.address.street,[h.required]],address_city:[this.user()?.address.city,[h.required]],address_state:[this.user()?.address.state,[h.required]],address_country:[this.user()?.address.country,[h.required]],address_zip_code:[this.user()?.address.zipCode,[h.required]]});editMode=L(!1);enableEditMode(){this.editMode.set(!0)}saveProfile(){if(this.editForm.invalid){this.editForm.markAllAsTouched();return}if(this.editForm.dirty){this.editMode.set(!1);return}let i={};this.editForm.get("firstname")?.dirty&&(i.firstname=this.editForm.get("firstname")?.value??void 0),this.editForm.get("lastname")?.dirty&&(i.lastname=this.editForm.get("lastname")?.value??void 0);let e=this.editForm.get("dob");e&&e.value&&(i.dob=e.value?new Date(e.value):void 0),this.editForm.get("address_street")?.dirty&&(i.address=i.address||{},i.address.street=this.editForm.get("address_street")?.value??void 0),this.editForm.get("address_city")?.dirty&&(i.address=i.address||{},i.address.city=this.editForm.get("address_city")?.value??void 0),this.editForm.get("address_state")?.dirty&&(i.address=i.address||{},i.address.state=this.editForm.get("address_state")?.value??void 0),this.editForm.get("address_country")?.dirty&&(i.address=i.address||{},i.address.country=this.editForm.get("address_country")?.value??void 0),this.editForm.get("address_zip_code")?.dirty&&(i.address=i.address||{},i.address.zipCode=this.editForm.get("address_zip_code")?.value??void 0),this.pending.set(!0),this.authService.updateUserProfile(i).pipe(q(()=>this.pending.set(!1))).subscribe({next:n=>{console.log(n)},error:n=>{this.populateFieldErrors(n.error.details),console.error(n)}})}cancelEditMode(){this.editMode.set(!1)}populateFieldErrors(i){for(let e=0;e<i.length;e++){let n=i[e],s=n.context.key,p=n.message;this.editForm.get(s)?.setErrors({[`${s}ServerError`]:!0}),this.serverErrorMessages[`${s}ServerError`]=p}}getErrorMessage(i,e){return{required:"This field is required.",email:"Please enter a valid email address.",minlength:`Minimum length is ${e?.requiredLength} characters.`,maxlength:`Maximum length is ${e?.requiredLength} characters.`,futureDate:"can't have future date for date of birth.",pattern:"Password must contain a mix of letters, numbers, and special characters.",emailUsed:"Email already in use"}[i]||this.serverErrorMessages[i]||"Invalid input."}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=E({type:t,selectors:[["app-profile"]],decls:77,vars:11,consts:[[1,"p-5"],[1,"bg-white","overflow-hidden","shadow","rounded-lg","border","lg:w-[80%]","lg:m-auto"],[1,"px-4","py-5","sm:px-6"],[1,"flex","justify-between"],[1,"text-lg","leading-6","font-medium","text-gray-900"],[1,"space-x-1"],[1,"px-4","py-3","rounded-xl","text-sm","font-semibold","no-underline","hover:bg-primary/10","transition-all","text-primary"],[1,"mt-1","max-w-2xl","text-sm","text-gray-500"],["action","",3,"formGroup"],[1,"border-t","border-gray-200","px-4","py-5","sm:p-0"],[1,"sm:divide-y","sm:divide-gray-200"],[1,"py-3","sm:py-5","sm:grid","sm:grid-cols-3","sm:gap-4","sm:px-6"],[1,"text-sm","font-medium","text-gray-500"],[1,"mt-1","text-sm","text-gray-900","sm:mt-0","sm:col-span-2"],["routerLink","/change-password",1,"px-4","py-3","rounded-xl","text-sm","font-semibold","no-underline","hover:bg-primary/10","transition-all","text-primary"],[1,"px-4","py-3","rounded-xl","text-sm","font-semibold","text-white","no-underline","bg-primary","hover:bg-primaryHover","transition-all","text-center",3,"click"],[1,"px-4","py-3","rounded-xl","text-sm","font-semibold","no-underline","hover:bg-primary/10","transition-all","text-primary",3,"click"],["type","text","formControlName","firstname",1,"w-full","border","rounded-lg","min-h-8",3,"value"],[1,"error"],[1,"text-error","block"],["type","text","formControlName","lastname",1,"w-full","border","rounded-lg","min-h-8",3,"value"],["type","date","formControlName","dob",1,"w-full","border","rounded-lg","min-h-8",3,"value"],["type","text","formControlName","address_street",1,"w-full","border","rounded-lg","min-h-8",3,"value"],["type","text","formControlName","address_city",1,"w-full","border","rounded-lg","min-h-8",3,"value"],["type","text","formControlName","address_state",1,"w-full","border","rounded-lg","min-h-8",3,"value"],["type","text","formControlName","address_country",1,"w-full","border","rounded-lg","min-h-8",3,"value"],["type","text","formControlName","address_zip_code",1,"w-full","border","rounded-lg","min-h-8",3,"value"]],template:function(e,n){if(e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),a(5," User Profile "),o(),_(6,Ir,5,0,"div",5)(7,Lr,2,0,"button",6),o(),r(8,"p",7),a(9," This is some information about the user. "),o()(),r(10,"form",8)(11,"div",9)(12,"dl",10)(13,"div",11)(14,"dt",12),a(15," First name "),o(),r(16,"dd",13),_(17,Vr,5,3)(18,Ar,1,1),o()(),r(19,"div",11)(20,"dt",12),a(21," Last name "),o(),r(22,"dd",13),_(23,Nr,5,3)(24,Br,1,1),o()(),r(25,"div",11)(26,"dt",12),a(27," Email address "),o(),r(28,"dd",13),a(29),o()(),r(30,"div",11)(31,"dt",12),a(32," Date of Birth "),o(),r(33,"dd",13),_(34,jr,6,6)(35,Hr,2,4),o()(),r(36,"div",11)(37,"dt",12),a(38," password "),o(),r(39,"dd",13)(40,"a",14),a(41,"change password"),o()()()()(),r(42,"div",2)(43,"h3",4),a(44," Billing Address "),o()(),r(45,"div",9)(46,"dl",10)(47,"div",11)(48,"dt",12),a(49," Street "),o(),r(50,"dd",13),_(51,$r,5,3)(52,qr,1,1),o()(),r(53,"div",11)(54,"dt",12),a(55," city "),o(),r(56,"dd",13),_(57,zr,5,3)(58,Wr,1,1),o()(),r(59,"div",11)(60,"dt",12),a(61," State "),o(),r(62,"dd",13),_(63,Qr,5,3)(64,Yr,1,1),o()(),r(65,"div",11)(66,"dt",12),a(67," Country "),o(),r(68,"dd",13),_(69,Kr,5,3)(70,Xr,1,1),o()(),r(71,"div",11)(72,"dt",12),a(73," Zip Code "),o(),r(74,"dd",13),_(75,tn,5,3)(76,rn,1,1),o()()()()()()()),e&2){let s;l(6),v(n.editMode()?6:7),l(4),m("formGroup",n.editForm),l(7),v(n.editMode()?17:18),l(6),v(n.editMode()?23:24),l(6),w(" ",(s=n.user())==null?null:s.email," "),l(5),v(n.editMode()?34:35),l(17),v(n.editMode()?51:52),l(6),v(n.editMode()?57:58),l(6),v(n.editMode()?63:64),l(6),v(n.editMode()?69:70),l(6),v(n.editMode()?75:76)}},dependencies:[R,te,Y,U,$,Q,X,K,Pe,D,oe,Ee,me],encapsulation:2})};var wt=(t,i)=>{let e=x(M),n=x(j);return e.user$.pipe(ye(1),z(s=>!!s),W(s=>{s||n.navigate(["/login"],{queryParams:{returnUrl:i.url}})}))};function on(t,i){t&1&&(r(0,"div",1),b(),r(1,"svg",2),c(2,"circle",3)(3,"path",4),o(),F(),r(4,"span",5),a(5,"Processing request..."),o()())}function an(t,i){t&1&&(c(0,"div",6),r(1,"div",7),b(),r(2,"svg",8),c(3,"path",9),o(),F(),r(4,"div",10)(5,"span",11),a(6,"Success!"),o(),r(7,"span",12),a(8,"your email was verified successfully."),o()()(),r(9,"a",13),a(10," Go to Login"),o())}function ln(t,i){if(t&1&&(c(0,"div",6),r(1,"div",14),b(),r(2,"svg",8),c(3,"path",15),o(),F(),r(4,"div",10)(5,"span",11),a(6,"Error"),o(),r(7,"span",12),a(8),o()()()),t&2){let e=d();l(8),S(e.errorMessage())}}var lt=class t{authService=x(M);route=x(pe);status=L("pending");errorMessage=L("");ngOnInit(){this.route.queryParams.pipe(je(i=>i.token?this.authService.verify(i.token):Be(()=>new Error("No Token")))).subscribe({next:i=>{this.status.set("success")},error:i=>{this.status.set("error"),this.errorMessage.set(i.error?.message||i.message)}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=E({type:t,selectors:[["app-verify"]],decls:4,vars:1,consts:[[1,"max-w-sm","mx-auto","p-4","border","rounded-lg","shadow-sm","bg-white","font-sans"],[1,"flex","items-center","space-x-3","text-amber-700","bg-amber-50","p-3","rounded-md","border","border-amber-200"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"animate-spin","h-5","w-5"],["cx","12","cy","12","r","10","stroke","currentColor",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"font-medium"],[1,"my-4"],[1,"flex","items-center","space-x-3","text-emerald-700","bg-emerald-50","p-3","rounded-md","border","border-emerald-200"],["fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"flex","flex-col"],[1,"font-bold"],[1,"text-sm","opacity-90"],["routerLink","/login",1,""],[1,"flex","items-center","space-x-3","text-rose-700","bg-rose-50","p-3","rounded-md","border","border-rose-200"],["stroke-linecap","round","stroke-linejoin","round","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"]],template:function(e,n){e&1&&(r(0,"div",0),_(1,on,6,0,"div",1)(2,an,11,0)(3,ln,9,1),o()),e&2&&(l(),v(n.status()=="pending"?1:n.status()=="success"?2:3))},dependencies:[D],encapsulation:2})};var st=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=E({type:t,selectors:[["app-not-found"]],decls:9,vars:0,consts:[[1,"min-h-screen","bg-light","flex","flex-col","items-center","justify-center","gap-6","text-center","px-4"],[1,"text-9xl","font-extrabold","text-primary"],[1,"text-2xl","font-bold","text-textMain"],[1,"text-textSub","max-w-sm"],["routerLink","/",1,"bg-primary","text-white","px-8","py-3","rounded-full","font-bold","no-underline","hover:bg-primaryHover","transition-all"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"h1",1),a(2,"404"),o(),r(3,"h2",2),a(4,"Page Not Found"),o(),r(5,"p",3),a(6,"Looks like this page went missing from our shelves."),o(),r(7,"a",4),a(8," Back to Home "),o()())},dependencies:[oe,D],encapsulation:2})};var zt=(t,i)=>i.key;function sn(t,i){t&1&&(b(),r(0,"svg",6),c(1,"path",13),o())}function dn(t,i){t&1&&(b(),r(0,"svg",6),c(1,"path",14)(2,"path",15),o())}function mn(t,i){if(t&1&&(r(0,"small",16),a(1),o()),t&2){let e=i.$implicit,n=d(2);l(),S(n.getErrorMessage(e.key,e.value))}}function cn(t,i){if(t&1&&(O(0,mn,2,1,"small",16,zt),y(2,"keyvalue")),t&2){d();let e=Z(3);V(k(2,0,e==null?null:e.errors))}}function pn(t,i){t&1&&(b(),r(0,"svg",6),c(1,"path",13),o())}function un(t,i){t&1&&(b(),r(0,"svg",6),c(1,"path",14)(2,"path",15),o())}function gn(t,i){if(t&1&&(r(0,"small",16),a(1),o()),t&2){let e=i.$implicit,n=d(2);l(),S(n.getErrorMessage(e.key,e.value))}}function fn(t,i){if(t&1&&(O(0,gn,2,1,"small",16,zt),y(2,"keyvalue")),t&2){d();let e=Z(2);V(k(2,0,e==null?null:e.errors))}}function xn(t,i){t&1&&(b(),r(0,"svg",6),c(1,"path",13),o())}function _n(t,i){t&1&&(b(),r(0,"svg",6),c(1,"path",14)(2,"path",15),o())}function vn(t,i){t&1&&(r(0,"small",11),a(1,"passwords should match"),o())}var hn=t=>{let i=t.get("password"),e=t.get("password_confirm");return i?.value!=e?.value?(e?.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):(e?.setErrors(null),null)},dt=class t{authService=x(M);route=x(pe);fb=x(ee);router=x(j);token=Fe(this.route.queryParamMap.pipe(z(i=>i.get("token"))));changePasswordForm=this.fb.group({old_password:["",[h.required,h.minLength(8),h.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])/)]],password:["",[h.required,h.minLength(8),h.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])/)]],password_confirm:["",[h.required]]},{validators:hn});pending=L(!1);showPassword=!1;showOldPassword=L(!1);showPasswordConfirm=!1;serverErrorMessages={};onSubmit(){if(this.changePasswordForm.invalid){this.changePasswordForm.markAllAsTouched();return}this.pending.set(!0),this.authService.updateUserProfile({password:this.changePasswordForm.get("password")?.value||"",oldPassword:this.changePasswordForm.get("old_password")?.value||""}).pipe(q(()=>this.pending.set(!1))).subscribe({next:i=>{this.router.navigateByUrl("/profile")},error:i=>{i.error.details==="old password is incorrect"?this.populateFieldErrors([{context:{key:"old_password"},message:"Old password is incorrect"}]):i.error.details&&this.populateFieldErrors(i.error.details),console.error(i)}})}populateFieldErrors(i){for(let e=0;e<i.length;e++){let n=i[e],s=n.context.key,p=n.message;this.changePasswordForm.get(s)?.setErrors({[`${s}ServerError`]:!0}),this.serverErrorMessages[`${s}ServerError`]=p}}getErrorMessage(i,e){return{required:"This field is required.",email:"Please enter a valid email address.",minlength:`Minimum length is ${e?.requiredLength} characters.`,maxlength:`Maximum length is ${e?.requiredLength} characters.`,futureDate:"can't have future date for date of birth.",pattern:"Password must contain a mix of letters, numbers, and special characters.",emailUsed:"Email already in use"}[i]||this.serverErrorMessages[i]||"Invalid input."}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=E({type:t,selectors:[["app-change-password"]],decls:33,vars:13,consts:[[1,"max-w-sm","mx-auto","p-4","border","rounded-lg","shadow-sm","bg-white","font-sans"],["action","#",1,"space-y-5",3,"ngSubmit","formGroup"],["for","old_password",1,"block","font-medium","mb-1"],[1,"relative"],["id","old_password","formControlName","old_password",1,"w-full","border","border-gray-300","rounded-lg","min-h-10","p-2","pr-10","focus:ring-2","focus:ring-primary","focus:border-transparent","outline-none","transition-all",3,"type"],["type","button",1,"absolute","inset-y-0","right-0","pr-3","flex","items-center","text-sm","leading-5",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-5","h-5","text-gray-500","hover:text-gray-700"],["for","password",1,"block","font-medium","mb-1"],["id","password","formControlName","password",1,"w-full","border","border-gray-300","rounded-lg","min-h-10","p-2","pr-10","focus:ring-2","focus:ring-primary","focus:border-transparent","outline-none","transition-all",3,"type"],["for","password_confirm",1,"block","font-medium","mb-1"],["id","password_confirm","formControlName","password_confirm",1,"w-full","border","border-gray-300","rounded-lg","min-h-10","p-2","pr-10","focus:ring-2","focus:ring-primary","focus:border-transparent","outline-none","transition-all",3,"type"],[1,"text-error"],["type","submit",1,"w-full","px-4","py-2","mt-4","rounded-xl","text-md","font-semibold","text-white","no-underline","bg-primary","hover:bg-primaryHover","transition-all","disabled:opacity-50","disabled:cursor-not-allowed","focus:ring-2","focus:ring-offset-2","focus:ring-primary","outline-none",3,"disabled"],["stroke-linecap","round","stroke-linejoin","round","d","M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"],["stroke-linecap","round","stroke-linejoin","round","d","M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"],["stroke-linecap","round","stroke-linejoin","round","d","M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"],[1,"text-error","block"]],template:function(e,n){if(e&1){let s=P();r(0,"div",0)(1,"form",1),u("ngSubmit",function(){return g(s),f(n.onSubmit())}),le(2)(3),r(4,"div")(5,"label",2),a(6,"Old Password"),o(),r(7,"div",3),c(8,"input",4),r(9,"button",5),u("click",function(){return g(s),f(n.showOldPassword.set(!n.showOldPassword()))}),_(10,sn,2,0,":svg:svg",6)(11,dn,3,0,":svg:svg",6),o()(),_(12,cn,3,2),o(),r(13,"div")(14,"label",7),a(15,"new Password"),o(),r(16,"div",3),c(17,"input",8),r(18,"button",5),u("click",function(){return g(s),f(n.showPassword=!n.showPassword)}),_(19,pn,2,0,":svg:svg",6)(20,un,3,0,":svg:svg",6),o()(),_(21,fn,3,2),o(),r(22,"div")(23,"label",9),a(24,"password confirm"),o(),r(25,"div",3),c(26,"input",10),r(27,"button",5),u("click",function(){return g(s),f(n.showPasswordConfirm=!n.showPasswordConfirm)}),_(28,xn,2,0,":svg:svg",6)(29,_n,3,0,":svg:svg",6),o()(),_(30,vn,2,0,"small",11),o(),r(31,"button",12),a(32,"Change password"),o()()()}if(e&2){l(),m("formGroup",n.changePasswordForm),l();let s=J(n.changePasswordForm.get("password"));l();let p=J(n.changePasswordForm.get("old_password")),N=n.changePasswordForm.get("password_confirm");l(5),m("type",n.showOldPassword()?"text":"password"),l(2),v(n.showOldPassword()?10:11),l(2),v(p!=null&&p.invalid&&(p!=null&&p.dirty||p!=null&&p.touched)?12:-1),l(5),m("type",n.showPassword?"text":"password"),l(2),v(n.showPassword?19:20),l(2),v(s!=null&&s.invalid&&(s!=null&&s.dirty||s!=null&&s.touched)?21:-1),l(5),m("type",n.showPasswordConfirm?"text":"password"),l(2),v(n.showPasswordConfirm?28:29),l(2),v(N!=null&&N.invalid&&(N!=null&&N.dirty||N!=null&&N.touched)?30:-1),l(),m("disabled",n.pending())}},dependencies:[te,Y,U,$,Q,X,K,R,me],encapsulation:2})};function bn(t,i){t&1&&(r(0,"div",4)(1,"div",6),a(2," Check your inbox! We've sent instructions to your email. "),o(),r(3,"a",7),a(4," Back to login "),o()())}function yn(t,i){if(t&1&&(r(0,"div",9),a(1),o()),t&2){let e=d(2);l(),w(" ",e.errorMessage()," ")}}function wn(t,i){t&1&&(r(0,"div",12)(1,"small",15),a(2,"Please enter a valid email address"),o()())}function Cn(t,i){t&1&&(r(0,"span",14),b(),r(1,"svg",16),c(2,"circle",17)(3,"path",18),o(),a(4," Sending... "),o())}function Sn(t,i){t&1&&a(0," Send Reset Link ")}function kn(t,i){if(t&1){let e=P();r(0,"form",8),u("ngSubmit",function(){g(e);let s=d();return f(s.onSubmit())}),_(1,yn,2,1,"div",9),r(2,"div")(3,"label",10),a(4,"Email"),o(),c(5,"input",11),_(6,wn,3,0,"div",12),o(),r(7,"button",13),_(8,Cn,5,0,"span",14)(9,Sn,1,0),o()()}if(t&2){let e=d();m("formGroup",e.forgetPasswordForm),l(),v(e.status()==="error"?1:-1);let n=e.forgetPasswordForm.get("email");l(4),Ue("border-red-500",(n==null?null:n.invalid)&&((n==null?null:n.dirty)||(n==null?null:n.touched))),l(),v(n!=null&&n.invalid&&(n!=null&&n.dirty||n!=null&&n.touched)?6:-1),l(),m("disabled",e.pending()||e.forgetPasswordForm.invalid),l(),v(e.pending()?8:9)}}var mt=class t{authService=x(M);fb=x(ee);status=L("editing");pending=L(!1);errorMessage=L("");forgetPasswordForm=this.fb.group({email:["",[h.email,h.required]]});onSubmit(){this.forgetPasswordForm.valid&&(this.pending.set(!0),this.authService.forgetPassword(this.forgetPasswordForm.get("email")?.value||"").pipe(q(()=>this.pending.set(!1))).subscribe({next:()=>{this.status.set("sent")},error:i=>{this.status.set("error"),this.errorMessage.set(i.message)}}))}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=E({type:t,selectors:[["app-forget-password"]],decls:8,vars:1,consts:[[1,"flex","min-h-screen","items-center","justify-center","bg-gray-50","p-4"],[1,"max-w-sm","w-full","p-6","border","rounded-lg","shadow-sm","bg-white","font-sans"],[1,"text-2xl","font-bold","text-gray-800","mb-2"],[1,"text-gray-500","mb-6","text-sm"],[1,"text-center","py-4"],[1,"space-y-5",3,"formGroup"],[1,"bg-green-100","text-green-700","p-4","rounded-lg","mb-4"],["routerLink","/login",1,"text-primary","font-medium","hover:underline"],[1,"space-y-5",3,"ngSubmit","formGroup"],[1,"p-3","text-sm","text-red-600","bg-red-50","border","border-red-200","rounded-lg"],["for","email",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","email","type","email","formControlName","email","placeholder","name@company.com",1,"w-full","border","border-gray-300","rounded-lg","min-h-10","p-2","focus:ring-2","focus:ring-primary","focus:border-transparent","outline-none","transition-all"],[1,"mt-1"],["type","submit",1,"w-full","px-4","py-2","mt-4","rounded-xl","text-md","font-semibold","text-white","bg-primary","hover:bg-primaryHover","transition-all","disabled:opacity-50","disabled:cursor-not-allowed","focus:ring-2","focus:ring-offset-2","focus:ring-primary","outline-none",3,"disabled"],[1,"flex","items-center","justify-center","gap-2"],[1,"text-red-500","block"],["viewBox","0 0 24 24",1,"animate-spin","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4","fill","none",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"div",1)(2,"h2",2),a(3,"Reset Password"),o(),r(4,"p",3),a(5,"Enter your email and we'll send you a link to reset your password."),o(),_(6,bn,5,0,"div",4)(7,kn,10,7,"form",5),o()()),e&2&&(l(6),v(n.status()==="sent"?6:7))},dependencies:[te,Y,U,$,Q,X,K,R,D],encapsulation:2})};var En=(t,i)=>i.key;function Pn(t,i){t&1&&(b(),r(0,"svg",8),c(1,"path",12),o())}function Mn(t,i){t&1&&(b(),r(0,"svg",8),c(1,"path",13)(2,"path",14),o())}function Tn(t,i){if(t&1&&(r(0,"small",15),a(1),o()),t&2){let e=i.$implicit,n=d(3);l(),S(n.getErrorMessage(e.key,e.value))}}function Fn(t,i){if(t&1&&(O(0,Tn,2,1,"small",15,En),y(2,"keyvalue")),t&2){d();let e=Z(1);V(k(2,0,e==null?null:e.errors))}}function In(t,i){t&1&&(b(),r(0,"svg",8),c(1,"path",12),o())}function Ln(t,i){t&1&&(b(),r(0,"svg",8),c(1,"path",13)(2,"path",14),o())}function On(t,i){t&1&&(r(0,"small",2),a(1,"passwords should match"),o())}function Vn(t,i){if(t&1){let e=P();r(0,"form",3),u("ngSubmit",function(){g(e);let s=d();return f(s.onSubmit())}),le(1),r(2,"div")(3,"label",4),a(4,"new Password"),o(),r(5,"div",5),c(6,"input",6),r(7,"button",7),u("click",function(){g(e);let s=d();return f(s.showPassword=!s.showPassword)}),_(8,Pn,2,0,":svg:svg",8)(9,Mn,3,0,":svg:svg",8),o()(),_(10,Fn,3,2),o(),r(11,"div")(12,"label",9),a(13,"password confirm"),o(),r(14,"div",5),c(15,"input",10),r(16,"button",7),u("click",function(){g(e);let s=d();return f(s.showPasswordConfirm=!s.showPasswordConfirm)}),_(17,In,2,0,":svg:svg",8)(18,Ln,3,0,":svg:svg",8),o()(),_(19,On,2,0,"small",2),o(),r(20,"button",11),a(21,"Reset Password"),o()()}if(t&2){let e=d();m("formGroup",e.resetPasswordForm),l();let n=J(e.resetPasswordForm.get("password")),s=e.resetPasswordForm.get("password_confirm");l(5),m("type",e.showPassword?"text":"password"),l(2),v(e.showPassword?8:9),l(2),v(n!=null&&n.invalid&&(n!=null&&n.dirty||n!=null&&n.touched)?10:-1),l(5),m("type",e.showPasswordConfirm?"text":"password"),l(2),v(e.showPasswordConfirm?17:18),l(2),v(s!=null&&s.invalid&&(s!=null&&s.dirty||s!=null&&s.touched)?19:-1),l(),m("disabled",e.pending())}}function An(t,i){t&1&&(r(0,"div",2),a(1," Unauthorized"),o())}var Dn=t=>{let i=t.get("password"),e=t.get("password_confirm");return i?.value!=e?.value?(e?.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):(e?.setErrors(null),null)},ct=class t{authService=x(M);route=x(pe);fb=x(ee);router=x(j);token=Fe(this.route.queryParamMap.pipe(z(i=>i.get("token"))));resetPasswordForm=this.fb.group({password:["",[h.required,h.minLength(8),h.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])/)]],password_confirm:["",[h.required]]},{validators:Dn});pending=L(!1);showPassword=!1;showPasswordConfirm=!1;serverErrorMessages={};onSubmit(){if(this.resetPasswordForm.invalid){this.resetPasswordForm.markAllAsTouched();return}this.pending.set(!0);let i=this.resetPasswordForm.get("password")?.value||"";this.authService.resetPassword(i,this.token()||"").pipe(q(()=>this.pending.set(!1))).subscribe({next:e=>{this.router.navigateByUrl("/login")},error:e=>{e.error.details&&this.populateFieldErrors(e.error.details),console.error(e)}})}populateFieldErrors(i){for(let e=0;e<i.length;e++){let n=i[e],s=n.context.key,p=n.message;this.resetPasswordForm.get(s)?.setErrors({[`${s}ServerError`]:!0}),this.serverErrorMessages[`${s}ServerError`]=p}}getErrorMessage(i,e){return{required:"This field is required.",email:"Please enter a valid email address.",minlength:`Minimum length is ${e?.requiredLength} characters.`,maxlength:`Maximum length is ${e?.requiredLength} characters.`,futureDate:"can't have future date for date of birth.",pattern:"Password must contain a mix of letters, numbers, and special characters.",emailUsed:"Email already in use"}[i]||this.serverErrorMessages[i]||"Invalid input."}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=E({type:t,selectors:[["app-reset-password"]],decls:3,vars:1,consts:[[1,"max-w-sm","mx-auto","p-4","border","rounded-lg","shadow-sm","bg-white","font-sans"],["action","#",1,"space-y-5",3,"formGroup"],[1,"text-error"],["action","#",1,"space-y-5",3,"ngSubmit","formGroup"],["for","password",1,"block","font-medium","mb-1"],[1,"relative"],["id","password","formControlName","password",1,"w-full","border","border-gray-300","rounded-lg","min-h-10","p-2","pr-10","focus:ring-2","focus:ring-primary","focus:border-transparent","outline-none","transition-all",3,"type"],["type","button",1,"absolute","inset-y-0","right-0","pr-3","flex","items-center","text-sm","leading-5",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-5","h-5","text-gray-500","hover:text-gray-700"],["for","password_confirm",1,"block","font-medium","mb-1"],["id","password_confirm","formControlName","password_confirm",1,"w-full","border","border-gray-300","rounded-lg","min-h-10","p-2","pr-10","focus:ring-2","focus:ring-primary","focus:border-transparent","outline-none","transition-all",3,"type"],["type","submit",1,"w-full","px-4","py-2","mt-4","rounded-xl","text-md","font-semibold","text-white","no-underline","bg-primary","hover:bg-primaryHover","transition-all","disabled:opacity-50","disabled:cursor-not-allowed","focus:ring-2","focus:ring-offset-2","focus:ring-primary","outline-none",3,"disabled"],["stroke-linecap","round","stroke-linejoin","round","d","M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"],["stroke-linecap","round","stroke-linejoin","round","d","M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"],["stroke-linecap","round","stroke-linejoin","round","d","M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"],[1,"text-error","block"]],template:function(e,n){e&1&&(r(0,"div",0),_(1,Vn,22,9,"form",1)(2,An,2,0,"div",2),o()),e&2&&(l(),v(n.token()?1:2))},dependencies:[te,Y,U,$,Q,X,K,R,me],encapsulation:2})};var Wt=[{path:"",component:Ye},{path:"login",component:Je,canActivate:[Te]},{path:"register",component:Ke,canActivate:[Te]},{path:"books/:id",loadComponent:()=>import("./chunk-2DGBCAMO.js").then(t=>t.BookDetailPage)},{path:"books",loadComponent:()=>import("./chunk-M6SFMUR6.js").then(t=>t.BooksPage)},{path:"profile",component:at,canActivate:[wt]},{path:"verify-email",component:lt,canActivate:[Te]},{path:"change-password",component:dt,canActivate:[wt]},{path:"forget-password",component:mt,canActivate:[Te]},{path:"reset-password",component:ct,canActivate:[Te]},{path:"admin",component:Xe,canActivate:[Gt],children:[{path:"dashboard",component:et},{path:"orders",component:tt},{path:"authors",component:it},{path:"categories",component:nt},{path:"books",component:ot},{path:"",redirectTo:"dashboard",pathMatch:"full"}]},{path:"cart",loadComponent:()=>import("./chunk-KS3P44GK.js").then(t=>t.CartComponent)},{path:"checkout",loadComponent:()=>import("./chunk-4WQ666WR.js").then(t=>t.CheckoutComponent)},{path:"orders",loadComponent:()=>import("./chunk-LBADDU2Z.js").then(t=>t.OrdersComponent)},{path:"**",component:st}];var Zt=(t,i)=>{let n=x(M).getAccessToken();return n&&(t=t.clone({setHeaders:{Authorization:`Bearer ${n}`}})),i(t)};var Qt={providers:[St(),Dt(Wt),Vt(At([Zt])),Et(()=>{let t=x(M),i=x(qt);return t.hydrate().pipe(W(()=>{t.getAccessToken()&&i.loadCart()})).toPromise()})]};var Nn=()=>({exact:!0});function Bn(t,i){t&1&&(r(0,"li")(1,"a",16),a(2,"Dashboard"),o()())}function Rn(t,i){if(t&1&&(r(0,"span",23),a(1),o()),t&2){let e=d(2);l(),w(" ",e.cartCount," ")}}function jn(t,i){if(t&1&&(r(0,"a",17),b(),r(1,"svg",18),c(2,"circle",19)(3,"circle",20)(4,"path",21),o(),C(5,Rn,2,1,"span",22),o()),t&2){let e=d();l(5),m("ngIf",e.cartCount>0)}}function Hn(t,i){if(t&1){let e=P();r(0,"div",27)(1,"a",28),u("click",function(){g(e);let s=d(2);return f(s.dropdownOpen=!1)}),a(2,"My Orders"),o(),r(3,"a",29),u("click",function(){g(e);let s=d(2);return f(s.dropdownOpen=!1)}),a(4,"Profile"),o(),c(5,"hr",30),r(6,"button",31),u("click",function(){g(e);let s=d(2);return f(s.logout())}),a(7,"Logout"),o()()}}function Un(t,i){if(t&1){let e=P();r(0,"div",24)(1,"div",25),u("click",function(){g(e);let s=d();return f(s.toggleDropdown())}),a(2),y(3,"async"),o(),C(4,Hn,8,0,"div",26),o()}if(t&2){let e=d();l(2),w(" ",k(3,2,e.userInitial)," "),l(2),m("ngIf",e.dropdownOpen)}}function $n(t,i){t&1&&(r(0,"div",32)(1,"a",33),a(2,"Login"),o(),r(3,"a",34),a(4,"Sign Up"),o()())}function qn(t,i){if(t&1&&(r(0,"span",42),a(1),o()),t&2){let e=d(3);l(),w("(",e.cartCount,")")}}function Gn(t,i){if(t&1){let e=P();r(0,"a",43),u("click",function(){g(e);let s=d(3);return f(s.mobileOpen=!1)}),a(1,"Dashboard"),o()}}function zn(t,i){if(t&1){let e=P();Le(0),r(1,"a",38),u("click",function(){g(e);let s=d(2);return f(s.mobileOpen=!1)}),a(2," Cart "),C(3,qn,2,1,"span",39),o(),r(4,"a",40),u("click",function(){g(e);let s=d(2);return f(s.mobileOpen=!1)}),a(5,"My Orders"),o(),C(6,Gn,2,0,"a",41),y(7,"async"),r(8,"button",31),u("click",function(){g(e);let s=d(2);return f(s.mobileOpen=!1)})("click",function(){g(e);let s=d(2);return f(s.logout())}),a(9,"Logout"),o(),Oe()}if(t&2){let e=d(2);l(3),m("ngIf",e.cartCount>0),l(3),m("ngIf",k(7,2,e.isAdmin))}}function Wn(t,i){if(t&1){let e=P();Le(0),r(1,"a",44),u("click",function(){g(e);let s=d(2);return f(s.mobileOpen=!1)}),a(2,"Login"),o(),r(3,"a",45),u("click",function(){g(e);let s=d(2);return f(s.mobileOpen=!1)}),a(4,"Sign Up"),o(),Oe()}}function Zn(t,i){if(t&1){let e=P();r(0,"div",35)(1,"a",36),u("click",function(){g(e);let s=d();return f(s.mobileOpen=!1)}),a(2,"Home"),o(),r(3,"a",37),u("click",function(){g(e);let s=d();return f(s.mobileOpen=!1)}),a(4,"Shop"),o(),c(5,"hr",30),C(6,zn,10,4,"ng-container",8),y(7,"async"),C(8,Wn,5,0,"ng-container",8),y(9,"async"),o()}if(t&2){let e=d();l(6),m("ngIf",k(7,2,e.isLoggedIn)),l(2),m("ngIf",!k(9,4,e.isLoggedIn))}}var pt=class t{constructor(i){this.router=i}authService=x(M);isLoggedIn=this.authService.user$.pipe(z(i=>!!i),Re(1));isAdmin=this.authService.user$.pipe(z(i=>i?.role=="admin"),Re(1));cartCount=0;userInitial=this.authService.user$.pipe(z(i=>i?.firstname.charAt(0).toUpperCase()||"U"),Re(1));dropdownOpen=!1;mobileOpen=!1;onSearch(i){let e=i.target.value;e.trim()&&this.router.navigate(["/books"],{queryParams:{search:e}})}toggleDropdown(){this.dropdownOpen=!this.dropdownOpen}toggleMobile(){this.mobileOpen=!this.mobileOpen}logout(){this.authService.logout().subscribe({next:()=>{this.dropdownOpen=!1,this.mobileOpen=!1,this.router.navigate(["/auth/login"])}})}onDocumentClick(i){i.target.closest(".user-menu")||(this.dropdownOpen=!1)}static \u0275fac=function(e){return new(e||t)(Ie(j))};static \u0275cmp=E({type:t,selectors:[["app-navbar"]],hostBindings:function(e,n){e&1&&u("click",function(p){return n.onDocumentClick(p)},kt)},decls:26,vars:15,consts:[[1,"sticky","top-0","z-50","bg-white","border-b","border-gray-100","shadow-sm"],[1,"w-full","px-6","lg:px-10","h-20","flex","items-center","justify-between"],[1,"flex-1","flex","items-center","justify-start"],["routerLink","/",1,"flex","items-center","no-underline","flex-shrink-0"],["src","logoW.png","alt","Diwan",1,"h-24","w-auto"],[1,"hidden","md:flex","items-center","gap-1","list-none","m-0","p-0","justify-center"],["routerLink","/","routerLinkActive","font-semibold",1,"px-4","py-2","rounded-lg","text-sm","font-medium","text-textSub","no-underline","hover:bg-primary/10","transition-all",3,"routerLinkActiveOptions"],["routerLink","/books",1,"px-4","py-2","rounded-lg","text-sm","font-medium","text-textSub","no-underline","hover:bg-primary/10","transition-all"],[4,"ngIf"],[1,"flex-1","flex","items-center","justify-end","gap-3"],["routerLink","/cart","class","relative flex items-center justify-center w-10 h-10 rounded-xl bg-gray-50 no-underline hover:bg-primary/10 text-textMain transition-all",4,"ngIf"],["class","user-menu relative",4,"ngIf"],["class","hidden md:flex items-center gap-2",4,"ngIf"],[1,"md:hidden","flex","flex-col","gap-1","bg-transparent","border-none","cursor-pointer","p-1",3,"click"],[1,"block","w-5","bg-gray-800","rounded",2,"height","2px"],["class","md:hidden border-t border-gray-100 px-6 py-3 flex flex-col gap-1",4,"ngIf"],["routerLink","/admin","routerLinkActive","font-semibold",1,"px-4","py-2","rounded-lg","text-sm","font-medium","text-textSub","no-underline","hover:bg-primary/10","transition-all"],["routerLink","/cart",1,"relative","flex","items-center","justify-center","w-10","h-10","rounded-xl","bg-gray-50","no-underline","hover:bg-primary/10","text-textMain","transition-all"],["width","19","height","19","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["cx","9","cy","21","r","1"],["cx","20","cy","21","r","1"],["d","M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"],["class","absolute -top-1 -right-1 text-white text-[10px] font-bold w-5 h-5 rounded-full flex items-center justify-center border-2 border-white bg-primary",4,"ngIf"],[1,"absolute","-top-1","-right-1","text-white","text-[10px]","font-bold","w-5","h-5","rounded-full","flex","items-center","justify-center","border-2","border-white","bg-primary"],[1,"user-menu","relative"],[1,"w-9","h-9","rounded-full","text-white","text-sm","font-bold","flex","items-center","justify-center","cursor-pointer","select-none","transition-opacity","hover:opacity-85","bg-primary",3,"click"],["class","absolute top-12 right-0 bg-white border border-gray-100 rounded-2xl shadow-lg p-2 flex flex-col","style","min-width:160px",4,"ngIf"],[1,"absolute","top-12","right-0","bg-white","border","border-gray-100","rounded-2xl","shadow-lg","p-2","flex","flex-col",2,"min-width","160px"],["routerLink","/orders",1,"px-4","py-2","rounded-lg","text-sm","font-medium","text-gray-600","no-underline","hover:bg-gray-50","transition-all",3,"click"],["routerLink","/profile",1,"px-4","py-2","rounded-lg","text-sm","font-medium","text-gray-600","no-underline","hover:bg-gray-50","transition-all",3,"click"],[1,"border-gray-100","my-1"],["routerLink","/",1,"px-4","py-2","rounded-lg","text-sm","font-medium","text-left","bg-transparent","border-none","cursor-pointer","hover:bg-error/10","transition-all","text-error",3,"click"],[1,"hidden","md:flex","items-center","gap-2"],["routerLink","/login",1,"px-4","py-2","rounded-xl","text-sm","font-semibold","no-underline","hover:bg-primary/10","transition-all","text-primary"],["routerLink","/register",1,"px-4","py-2","rounded-xl","text-sm","font-semibold","text-white","no-underline","bg-primary","hover:bg-primaryHover","transition-all"],[1,"md:hidden","border-t","border-gray-100","px-6","py-3","flex","flex-col","gap-1"],["routerLink","/",1,"px-4","py-3","rounded-xl","text-sm","font-medium","text-gray-600","no-underline","hover:bg-gray-50","transition-all",3,"click"],["routerLink","/books",1,"px-4","py-3","rounded-xl","text-sm","font-medium","text-gray-600","no-underline","hover:bg-gray-50","transition-all",3,"click"],["routerLink","/cart",1,"px-4","py-3","rounded-xl","text-sm","font-medium","text-gray-600","no-underline","hover:bg-gray-50","transition-all",3,"click"],["class","font-bold text-primary",4,"ngIf"],["routerLink","/orders",1,"px-4","py-3","rounded-xl","text-sm","font-medium","text-gray-600","no-underline","hover:bg-gray-50","transition-all",3,"click"],["routerLink","/admin","class","px-4 py-3 rounded-xl text-sm font-medium text-gray-600 no-underline hover:bg-gray-50 transition-all",3,"click",4,"ngIf"],[1,"font-bold","text-primary"],["routerLink","/admin",1,"px-4","py-3","rounded-xl","text-sm","font-medium","text-gray-600","no-underline","hover:bg-gray-50","transition-all",3,"click"],["routerLink","/login",1,"px-4","py-3","rounded-xl","text-sm","font-semibold","no-underline","hover:bg-primary/10","transition-all","text-primary",3,"click"],["routerLink","/register",1,"px-4","py-3","rounded-xl","text-sm","font-semibold","text-white","no-underline","bg-primary","hover:bg-primaryHover","transition-all","text-center",3,"click"]],template:function(e,n){e&1&&(r(0,"nav",0)(1,"div",1)(2,"div",2)(3,"a",3),c(4,"img",4),o()(),r(5,"ul",5)(6,"li")(7,"a",6),a(8,"Home"),o()(),r(9,"li")(10,"a",7),a(11,"Shop"),o()(),C(12,Bn,3,0,"li",8),y(13,"async"),o(),r(14,"div",9),C(15,jn,6,1,"a",10),y(16,"async"),C(17,Un,5,4,"div",11),y(18,"async"),C(19,$n,5,0,"div",12),y(20,"async"),r(21,"button",13),u("click",function(){return n.toggleMobile()}),c(22,"span",14)(23,"span",14)(24,"span",14),o()()(),C(25,Zn,10,6,"div",15),o()),e&2&&(l(7),m("routerLinkActiveOptions",se(14,Nn)),l(5),m("ngIf",k(13,6,n.isAdmin)),l(3),m("ngIf",k(16,8,n.isLoggedIn)),l(2),m("ngIf",k(18,10,n.isLoggedIn)),l(2),m("ngIf",!k(20,12,n.isLoggedIn)),l(6),m("ngIf",n.mobileOpen))},dependencies:[R,de,oe,D,We,qe],encapsulation:2})};var ut=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=E({type:t,selectors:[["app-footer"]],decls:54,vars:0,consts:[[1,"bg-dark","text-white","mt-auto"],[1,"max-w-6xl","mx-auto","px-6","py-12"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-10"],[1,"flex","flex-col","gap-4"],["routerLink","/",1,"no-underline"],["src","logoW.png","alt","Diwan",1,"h-24","w-auto","object-contain","bg-white","rounded-full"],[1,"text-sm","text-gray-400","leading-relaxed"],[1,"flex","flex-col","gap-3"],[1,"text-sm","font-semibold","text-white","tracking-wider","uppercase"],["routerLink","/",1,"text-sm","text-gray-400","no-underline","hover:text-primary","transition-colors"],["routerLink","/books",1,"text-sm","text-gray-400","no-underline","hover:text-primary","transition-colors"],["routerLink","/cart",1,"text-sm","text-gray-400","no-underline","hover:text-primary","transition-colors"],["routerLink","/orders",1,"text-sm","text-gray-400","no-underline","hover:text-primary","transition-colors"],[1,"text-sm","text-gray-400"],[1,"text-gray-500"],[1,"flex","items-center","gap-3","flex-wrap"],[1,"px-3","py-1.5","rounded-lg","flex","items-center","justify-center",2,"background","#1a1f71"],[1,"text-white","font-bold","italic","text-sm","tracking-wider"],[1,"flex","items-center","justify-center","w-10","h-7","rounded-lg","overflow-hidden",2,"background","#252525"],[1,"flex"],[1,"w-5","h-5","rounded-full","opacity-90",2,"background","#eb001b"],[1,"w-5","h-5","rounded-full","-ml-2","opacity-90",2,"background","#f79e1b"],[1,"px-3","py-1.5","rounded-lg",2,"background","#2a2a2a"],[1,"text-gray-300","font-medium","text-xs"],[1,"border-t","border-dashed","border-gray-700"],[1,"max-w-6xl","mx-auto","px-6","py-4","flex","flex-col","md:flex-row","items-center","justify-between","gap-2"],[1,"text-xs","text-gray-500"],[1,"text-xs","text-gray-600"]],template:function(e,n){e&1&&(I(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4),ht(5,"img",5),T(),I(6,"p",6),a(7," Books Delivered. Imagination Unlimited. "),T()(),I(8,"div",7)(9,"h4",8),a(10,"Quick Links"),T(),I(11,"a",9),a(12,"Home"),T(),I(13,"a",10),a(14,"Explore Books"),T(),I(15,"a",11),a(16,"Cart"),T(),I(17,"a",12),a(18,"My Orders"),T()(),I(19,"div",7)(20,"h4",8),a(21,"Contact"),T(),I(22,"p",13)(23,"span",14),a(24,"Email:"),T(),a(25," diwan@gmail.com "),T(),I(26,"p",13)(27,"span",14),a(28,"Phone:"),T(),a(29," +20 100 000 0000 "),T(),I(30,"p",13)(31,"span",14),a(32,"Address:"),T(),a(33," Cairo, Egypt "),T()(),I(34,"div",3)(35,"h4",8),a(36,"We Accept"),T(),I(37,"div",15)(38,"div",16)(39,"span",17),a(40,"VISA"),T()(),I(41,"div",18)(42,"div",19),ht(43,"div",20)(44,"div",21),T()(),I(45,"div",22)(46,"span",23),a(47,"Cash on Delivery"),T()()()()()(),I(48,"div",24)(49,"div",25)(50,"p",26),a(51," \xA9 2026 Diwan. All rights reserved. "),T(),I(52,"p",27),a(53," Made with \u2764\uFE0F by the Team "),T()()()())},encapsulation:2})};var gt=class t{title=L("Diwan");static \u0275fac=function(e){return new(e||t)};static \u0275cmp=E({type:t,selectors:[["app-root"]],decls:3,vars:0,template:function(e,n){e&1&&c(0,"app-navbar")(1,"router-outlet")(2,"app-footer")},dependencies:[ze,pt,ut],encapsulation:2})};Ot(gt,Qt).catch(t=>console.error(t));
